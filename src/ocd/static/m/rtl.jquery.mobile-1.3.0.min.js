/*
* jQuery Mobile Git Build: SHA1: caa77b258660731d663844fe7867aa2c3a107ab1 <> Date: Wed Feb 20 15:03:27 2013 -0500
* http://jquerymobile.com
*
* Copyright 2010, 2013 jQuery Foundation, Inc. and other contributors
* Released under the MIT license.
* http://jquery.org/license
*
*/

/*
* Right-To-Left changes made by Moutaz Shams under the same licenses mentioned above 
* http://www.intlaqa.com/jquery-mobile-rtl 
* 
*/


(function (a, c, b) { if (typeof define === "function" && define.amd) { define(["jquery"], function (d) { b(d, a, c); return d.mobile }) } else { b(a.jQuery, a, c) } }(this, document, function (c, b, a, d) {
    (function (e) { e.mobile = {} }(c)); (function (i, h, j) { var g = {}; i.mobile = i.extend(i.mobile, { version: "1.3.0", ns: "", subPageUrlKey: "ui-page", activePageClass: "ui-page-active", activeBtnClass: "ui-btn-active", focusClass: "ui-focus", ajaxEnabled: true, hashListeningEnabled: true, linkBindingEnabled: true, defaultPageTransition: "fade", maxTransitionWidth: false, minScrollBack: 250, touchOverflowEnabled: false, defaultDialogTransition: "pop", pageLoadErrorMessage: "Error Loading Page", pageLoadErrorMessageTheme: "e", phonegapNavigationEnabled: false, autoInitializePage: true, pushStateEnabled: true, ignoreContentEnabled: false, orientationChangeEnabled: true, buttonMarkup: { hoverDelay: 200 }, window: i(h), document: i(a), keyCode: { ALT: 18, BACKSPACE: 8, CAPS_LOCK: 20, COMMA: 188, COMMAND: 91, COMMAND_LEFT: 91, COMMAND_RIGHT: 93, CONTROL: 17, DELETE: 46, DOWN: 40, END: 35, ENTER: 13, ESCAPE: 27, HOME: 36, INSERT: 45, LEFT: 37, MENU: 93, NUMPAD_ADD: 107, NUMPAD_DECIMAL: 110, NUMPAD_DIVIDE: 111, NUMPAD_ENTER: 108, NUMPAD_MULTIPLY: 106, NUMPAD_SUBTRACT: 109, PAGE_DOWN: 34, PAGE_UP: 33, PERIOD: 190, RIGHT: 39, SHIFT: 16, SPACE: 32, TAB: 9, UP: 38, WINDOWS: 91 }, behaviors: {}, silentScroll: function (k) { if (i.type(k) !== "number") { k = i.mobile.defaultHomeScroll } i.event.special.scrollstart.enabled = false; setTimeout(function () { h.scrollTo(0, k); i.mobile.document.trigger("silentscroll", { x: 0, y: k }) }, 20); setTimeout(function () { i.event.special.scrollstart.enabled = true }, 150) }, nsNormalizeDict: g, nsNormalize: function (k) { if (!k) { return } return g[k] || (g[k] = i.camelCase(i.mobile.ns + k)) }, getInheritedTheme: function (p, l) { var q = p[0], n = "", o = /ui-(bar|body|overlay)-([a-z])\b/, r, k; while (q) { r = q.className || ""; if (r && (k = o.exec(r)) && (n = k[2])) { break } q = q.parentNode } return n || l || "a" }, closestPageData: function (k) { return k.closest(':jqmData(role="page"), :jqmData(role="dialog")').data("mobile-page") }, enhanceable: function (k) { return this.haveParents(k, "enhance") }, hijackable: function (k) { return this.haveParents(k, "ajax") }, haveParents: function (m, q) { if (!i.mobile.ignoreContentEnabled) { return m } var n = m.length, k = i(), p, s, o; for (var l = 0; l < n; l++) { s = m.eq(l); o = false; p = m[l]; while (p) { var r = p.getAttribute ? p.getAttribute("data-" + i.mobile.ns + q) : ""; if (r === "false") { o = true; break } p = p.parentNode } if (!o) { k = k.add(s) } } return k }, getScreenHeight: function () { return h.innerHeight || i.mobile.window.height() } }, i.mobile); i.fn.jqmData = function (m, l) { var k; if (typeof m !== "undefined") { if (m) { m = i.mobile.nsNormalize(m) } if (arguments.length < 2 || l === j) { k = this.data(m) } else { k = this.data(m, l) } } return k }; i.jqmData = function (l, n, m) { var k; if (typeof n !== "undefined") { k = i.data(l, n ? i.mobile.nsNormalize(n) : n, m) } return k }; i.fn.jqmRemoveData = function (k) { return this.removeData(i.mobile.nsNormalize(k)) }; i.jqmRemoveData = function (k, l) { return i.removeData(k, i.mobile.nsNormalize(l)) }; i.fn.removeWithDependents = function () { i.removeWithDependents(this) }; i.removeWithDependents = function (l) { var k = i(l); (k.jqmData("dependents") || i()).remove(); k.remove() }; i.fn.addDependents = function (k) { i.addDependents(i(this), k) }; i.addDependents = function (k, l) { var m = i(k).jqmData("dependents") || i(); i(k).jqmData("dependents", i.merge(m, l)) }; i.fn.getEncodedText = function () { return i("<div/>").text(i(this).text()).html() }; i.fn.jqmEnhanceable = function () { return i.mobile.enhanceable(this) }; i.fn.jqmHijackable = function () { return i.mobile.hijackable(this) }; var f = i.find, e = /:jqmData\(([^)]*)\)/g; i.find = function (l, n, m, k) { l = l.replace(e, "[data-" + (i.mobile.ns || "") + "$1]"); return f.call(this, l, n, m, k) }; i.extend(i.find, f); i.find.matches = function (k, l) { return i.find(k, null, null, l) }; i.find.matchesSelector = function (k, l) { return i.find(l, null, null, [k]).length > 0 } })(c, this);
    /*!
         * jQuery UI Widget v1.10.0pre - 2012-11-13 (ff055a0c353c3c8ce6e5bfa07ad7cb03e8885bc5)
         * http://jqueryui.com
         *
         * Copyright 2010, 2013 jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         *
         * http://api.jqueryui.com/jQuery.widget/
         */
    (function (f, i) { var e = 0, h = Array.prototype.slice, g = f.cleanData; f.cleanData = function (j) { for (var k = 0, l; (l = j[k]) != null; k++) { try { f(l).triggerHandler("remove") } catch (m) { } } g(j) }; f.widget = function (k, n, j) { var q, p, m, o, l = k.split(".")[0]; k = k.split(".")[1]; q = l + "-" + k; if (!j) { j = n; n = f.Widget } f.expr[":"][q.toLowerCase()] = function (r) { return !!f.data(r, q) }; f[l] = f[l] || {}; p = f[l][k]; m = f[l][k] = function (r, s) { if (!this._createWidget) { return new m(r, s) } if (arguments.length) { this._createWidget(r, s) } }; f.extend(m, p, { version: j.version, _proto: f.extend({}, j), _childConstructors: [] }); o = new n(); o.options = f.widget.extend({}, o.options); f.each(j, function (s, r) { if (f.isFunction(r)) { j[s] = (function () { var t = function () { return n.prototype[s].apply(this, arguments) }, u = function (v) { return n.prototype[s].apply(this, v) }; return function () { var x = this._super, v = this._superApply, w; this._super = t; this._superApply = u; w = r.apply(this, arguments); this._super = x; this._superApply = v; return w } })() } }); m.prototype = f.widget.extend(o, { widgetEventPrefix: p ? o.widgetEventPrefix : k }, j, { constructor: m, namespace: l, widgetName: k, widgetFullName: q }); if (p) { f.each(p._childConstructors, function (s, t) { var r = t.prototype; f.widget(r.namespace + "." + r.widgetName, m, t._proto) }); delete p._childConstructors } else { n._childConstructors.push(m) } f.widget.bridge(k, m) }; f.widget.extend = function (o) { var k = h.call(arguments, 1), n = 0, j = k.length, l, m; for (; n < j; n++) { for (l in k[n]) { m = k[n][l]; if (k[n].hasOwnProperty(l) && m !== i) { if (f.isPlainObject(m)) { o[l] = f.isPlainObject(o[l]) ? f.widget.extend({}, o[l], m) : f.widget.extend({}, m) } else { o[l] = m } } } } return o }; f.widget.bridge = function (k, j) { var l = j.prototype.widgetFullName || k; f.fn[k] = function (o) { var m = typeof o === "string", n = h.call(arguments, 1), p = this; o = !m && n.length ? f.widget.extend.apply(null, [o].concat(n)) : o; if (m) { this.each(function () { var r, q = f.data(this, l); if (!q) { return f.error("cannot call methods on " + k + " prior to initialization; attempted to call method '" + o + "'") } if (!f.isFunction(q[o]) || o.charAt(0) === "_") { return f.error("no such method '" + o + "' for " + k + " widget instance") } r = q[o].apply(q, n); if (r !== q && r !== i) { p = r && r.jquery ? p.pushStack(r.get()) : r; return false } }) } else { this.each(function () { var q = f.data(this, l); if (q) { q.option(o || {})._init() } else { f.data(this, l, new j(o, this)) } }) } return p } }; f.Widget = function () { }; f.Widget._childConstructors = []; f.Widget.prototype = { widgetName: "widget", widgetEventPrefix: "", defaultElement: "<div>", options: { disabled: false, create: null }, _createWidget: function (j, k) { k = f(k || this.defaultElement || this)[0]; this.element = f(k); this.uuid = e++; this.eventNamespace = "." + this.widgetName + this.uuid; this.options = f.widget.extend({}, this.options, this._getCreateOptions(), j); this.bindings = f(); this.hoverable = f(); this.focusable = f(); if (k !== this) { f.data(k, this.widgetFullName, this); this._on(true, this.element, { remove: function (l) { if (l.target === k) { this.destroy() } } }); this.document = f(k.style ? k.ownerDocument : k.document || k); this.window = f(this.document[0].defaultView || this.document[0].parentWindow) } this._create(); this._trigger("create", null, this._getCreateEventData()); this._init() }, _getCreateOptions: f.noop, _getCreateEventData: f.noop, _create: f.noop, _init: f.noop, destroy: function () { this._destroy(); this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(f.camelCase(this.widgetFullName)); this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled"); this.bindings.unbind(this.eventNamespace); this.hoverable.removeClass("ui-state-hover"); this.focusable.removeClass("ui-state-focus") }, _destroy: f.noop, widget: function () { return this.element }, option: function (m, n) { var j = m, o, l, k; if (arguments.length === 0) { return f.widget.extend({}, this.options) } if (typeof m === "string") { j = {}; o = m.split("."); m = o.shift(); if (o.length) { l = j[m] = f.widget.extend({}, this.options[m]); for (k = 0; k < o.length - 1; k++) { l[o[k]] = l[o[k]] || {}; l = l[o[k]] } m = o.pop(); if (n === i) { return l[m] === i ? null : l[m] } l[m] = n } else { if (n === i) { return this.options[m] === i ? null : this.options[m] } j[m] = n } } this._setOptions(j); return this }, _setOptions: function (j) { var k; for (k in j) { this._setOption(k, j[k]) } return this }, _setOption: function (j, k) { this.options[j] = k; if (j === "disabled") { this.widget().toggleClass(this.widgetFullName + "-disabled ui-state-disabled", !!k).attr("aria-disabled", k); this.hoverable.removeClass("ui-state-hover"); this.focusable.removeClass("ui-state-focus") } return this }, enable: function () { return this._setOption("disabled", false) }, disable: function () { return this._setOption("disabled", true) }, _on: function (m, l, k) { var n, j = this; if (typeof m !== "boolean") { k = l; l = m; m = false } if (!k) { k = l; l = this.element; n = this.widget() } else { l = n = f(l); this.bindings = this.bindings.add(l) } f.each(k, function (t, s) { function q() { if (!m && (j.options.disabled === true || f(this).hasClass("ui-state-disabled"))) { return } return (typeof s === "string" ? j[s] : s).apply(j, arguments) } if (typeof s !== "string") { q.guid = s.guid = s.guid || q.guid || f.guid++ } var r = t.match(/^(\w+)\s*(.*)$/), p = r[1] + j.eventNamespace, o = r[2]; if (o) { n.delegate(o, p, q) } else { l.bind(p, q) } }) }, _off: function (k, j) { j = (j || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace; k.unbind(j).undelegate(j) }, _delay: function (m, l) { function k() { return (typeof m === "string" ? j[m] : m).apply(j, arguments) } var j = this; return setTimeout(k, l || 0) }, _hoverable: function (j) { this.hoverable = this.hoverable.add(j); this._on(j, { mouseenter: function (k) { f(k.currentTarget).addClass("ui-state-hover") }, mouseleave: function (k) { f(k.currentTarget).removeClass("ui-state-hover") } }) }, _focusable: function (j) { this.focusable = this.focusable.add(j); this._on(j, { focusin: function (k) { f(k.currentTarget).addClass("ui-state-focus") }, focusout: function (k) { f(k.currentTarget).removeClass("ui-state-focus") } }) }, _trigger: function (j, k, l) { var o, n, m = this.options[j]; l = l || {}; k = f.Event(k); k.type = (j === this.widgetEventPrefix ? j : this.widgetEventPrefix + j).toLowerCase(); k.target = this.element[0]; n = k.originalEvent; if (n) { for (o in n) { if (!(o in k)) { k[o] = n[o] } } } this.element.trigger(k, l); return !(f.isFunction(m) && m.apply(this.element[0], [k].concat(l)) === false || k.isDefaultPrevented()) } }; f.each({ show: "fadeIn", hide: "fadeOut" }, function (k, j) { f.Widget.prototype["_" + k] = function (n, m, p) { if (typeof m === "string") { m = { effect: m } } var o, l = !m ? k : m === true || typeof m === "number" ? j : m.effect || j; m = m || {}; if (typeof m === "number") { m = { duration: m } } o = !f.isEmptyObject(m); m.complete = p; if (m.delay) { n.delay(m.delay) } if (o && f.effects && f.effects.effect[l]) { n[k](m) } else { if (l !== k && n[l]) { n[l](m.duration, m.easing, p) } else { n.queue(function (q) { f(this)[k](); if (p) { p.call(n[0]) } q() }) } } } }) })(c); (function (e, f) { e.widget("mobile.widget", { _createWidget: function () { e.Widget.prototype._createWidget.apply(this, arguments); this._trigger("init") }, _getCreateOptions: function () { var h = this.element, g = {}; e.each(this.options, function (i) { var j = h.jqmData(i.replace(/[A-Z]/g, function (k) { return "-" + k.toLowerCase() })); if (j !== f) { g[i] = j } }); return g }, enhanceWithin: function (h, g) { this.enhance(e(this.options.initSelector, e(h)), g) }, enhance: function (i, h) { var l, k, g = e(i), j = this; g = e.mobile.enhanceable(g); if (h && g.length) { l = e.mobile.closestPageData(g); k = (l && l.keepNativeSelector()) || ""; g = g.not(k) } g[this.widgetName]() }, raise: function (g) { throw "Widget [" + this.widgetName + "]: " + g } }) })(c); (function (h, g) { h.extend(h.mobile, { loadingMessageTextVisible: d, loadingMessageTheme: d, loadingMessage: d, showPageLoadingMsg: function (k, j, l) { h.mobile.loading("show", k, j, l) }, hidePageLoadingMsg: function () { h.mobile.loading("hide") }, loading: function () { this.loaderWidget.loader.apply(this.loaderWidget, arguments) } }); var f = "ui-loader", e = h("html"), i = h.mobile.window; h.widget("mobile.loader", { options: { theme: "a", textVisible: false, html: "", text: "loading" }, defaultHtml: "<div class='" + f + "'><span class='ui-icon ui-icon-loading'></span><h1></h1></div>", fakeFixLoader: function () { var j = h("." + h.mobile.activeBtnClass).first(); this.element.css({ top: h.support.scrollTop && i.scrollTop() + i.height() / 2 || j.length && j.offset().top || 100 }) }, checkLoaderPosition: function () { var k = this.element.offset(), j = i.scrollTop(), l = h.mobile.getScreenHeight(); if (k.top < j || (k.top - j) > l) { this.element.addClass("ui-loader-fakefix"); this.fakeFixLoader(); i.unbind("scroll", this.checkLoaderPosition).bind("scroll", h.proxy(this.fakeFixLoader, this)) } }, resetHtml: function () { this.element.html(h(this.defaultHtml).html()) }, show: function (o, k, p) { var n, l, j, m; this.resetHtml(); if (h.type(o) === "object") { m = h.extend({}, this.options, o); o = m.theme || h.mobile.loadingMessageTheme } else { m = this.options; o = o || h.mobile.loadingMessageTheme || m.theme } l = k || h.mobile.loadingMessage || m.text; e.addClass("ui-loading"); if (h.mobile.loadingMessage !== false || m.html) { if (h.mobile.loadingMessageTextVisible !== d) { n = h.mobile.loadingMessageTextVisible } else { n = m.textVisible } this.element.attr("class", f + " ui-corner-all ui-body-" + o + " ui-loader-" + (n || k || o.text ? "verbose" : "default") + (m.textonly || p ? " ui-loader-textonly" : "")); if (m.html) { this.element.html(m.html) } else { this.element.find("h1").text(l) } this.element.appendTo(h.mobile.pageContainer); this.checkLoaderPosition(); i.bind("scroll", h.proxy(this.checkLoaderPosition, this)) } }, hide: function () { e.removeClass("ui-loading"); if (h.mobile.loadingMessage) { this.element.removeClass("ui-loader-fakefix") } h.mobile.window.unbind("scroll", this.fakeFixLoader); h.mobile.window.unbind("scroll", this.checkLoaderPosition) } }); i.bind("pagecontainercreate", function () { h.mobile.loaderWidget = h.mobile.loaderWidget || h(h.mobile.loader.prototype.defaultHtml).loader() }) })(c, this); (function (h, j, f) { var g = "hashchange", m = a, k, l = h.event.special, n = m.documentMode, i = "on" + g in j && (n === f || n > 7); function e(o) { o = o || location.href; return "#" + o.replace(/^[^#]*#?(.*)$/, "$1") } h.fn[g] = function (o) { return o ? this.bind(g, o) : this.trigger(g) }; h.fn[g].delay = 50; l[g] = h.extend(l[g], { setup: function () { if (i) { return false } h(k.start) }, teardown: function () { if (i) { return false } h(k.stop) } }); k = (function () { var o = {}, u, r = e(), p = function (v) { return v }, q = p, t = p; o.start = function () { u || s() }; o.stop = function () { u && clearTimeout(u); u = f }; function s() { var w = e(), v = t(r); if (w !== r) { q(r = w, v); h(j).trigger(g) } else { if (v !== r) { location.href = location.href.replace(/#.*/, "") + v } } u = setTimeout(s, h.fn[g].delay) } j.attachEvent && !j.addEventListener && !i && (function () { var v, w; o.start = function () { if (!v) { w = h.fn[g].src; w = w && w + e(); v = h('<iframe tabindex="-1" title="empty"/>').hide().one("load", function () { w || q(e()); s() }).attr("src", w || "javascript:0").insertAfter("body")[0].contentWindow; m.onpropertychange = function () { try { if (event.propertyName === "title") { v.document.title = m.title } } catch (x) { } } } }; o.stop = p; t = function () { return e(v.location.href) }; q = function (A, x) { var z = v.document, y = h.fn[g].domain; if (A !== x) { z.title = m.title; z.open(); y && z.write('<script>document.domain="' + y + '"<\/script>'); z.close(); v.location.hash = A } } })(); return o })() })(c, this); (function (e, f) {
        /*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */
        b.matchMedia = b.matchMedia || (function (k, l) { var i, g = k.documentElement, h = g.firstElementChild || g.firstChild, j = k.createElement("body"), m = k.createElement("div"); m.id = "mq-test-1"; m.style.cssText = "position:absolute;top:-100em"; j.style.background = "none"; j.appendChild(m); return function (n) { m.innerHTML = '&shy;<style media="' + n + '"> #mq-test-1 { width: 42px; }</style>'; g.insertBefore(j, h); i = m.offsetWidth === 42; g.removeChild(j); return { matches: i, media: n } } }(a)); e.mobile.media = function (g) { return b.matchMedia(g).matches }
    })(c); (function (f, g) { var e = { touch: "ontouchend" in a }; f.mobile.support = f.mobile.support || {}; f.extend(f.support, e); f.extend(f.mobile.support, e) }(c)); (function (e, f) { e.extend(e.support, { orientation: "orientation" in b && "onorientationchange" in b }) }(c)); (function (m, i) { function g(z) { var y = z.charAt(0).toUpperCase() + z.substr(1), x = (z + " " + s.join(y + " ") + y).split(" "); for (var w in x) { if (q[x[w]] !== i) { return true } } } var j = m("<body>").prependTo("html"), q = j[0].style, s = ["Webkit", "Moz", "O"], u = "palmGetResource" in b, h = b.opera, r = b.operamini && ({}).toString.call(b.operamini) === "[object OperaMini]", p = b.blackberry && !g("-webkit-transform"); function l(v, B, x) { var w = a.createElement("div"), E = function (F) { return F.charAt(0).toUpperCase() + F.substr(1) }, D = function (F) { if (F === "") { return "" } else { return "-" + F.charAt(0).toLowerCase() + F.substr(1) + "-" } }, C = function (I) { var F = D(I) + v + ": " + B + ";", H = E(I), G = H + (H === "" ? v : E(v)); w.setAttribute("style", F); if (!!w.style[G]) { A = true } }, z = x ? x : s, A; for (var y = 0; y < z.length; y++) { C(z[y]) } return !!A } function k() { var z = "transform-3d", v = m.mobile.media("(-" + s.join("-" + z + "),(-") + "-" + z + "),(" + z + ")"); if (v) { return !!v } var y = a.createElement("div"), x = { MozTransform: "-moz-transform", transform: "transform" }; j.append(y); for (var w in x) { if (y.style[w] !== i) { y.style[w] = "translate3d( 100px, 1px, 1px )"; v = b.getComputedStyle(y).getPropertyValue(x[w]) } } return (!!v && v !== "none") } function f() { var z = location.protocol + "//" + location.host + location.pathname + "ui-dir/", y = m("head base"), A = null, v = "", x, w; if (!y.length) { y = A = m("<base>", { href: z }).appendTo("head") } else { v = y.attr("href") } x = m("<a href='testurl' />").prependTo(j); w = x[0].href; y[0].href = v || location.pathname; if (A) { A.remove() } return w.indexOf(z) === 0 } function t() { var w = a.createElement("x"), x = a.documentElement, y = b.getComputedStyle, v; if (!("pointerEvents" in w.style)) { return false } w.style.pointerEvents = "auto"; w.style.pointerEvents = "x"; x.appendChild(w); v = y && y(w, "").pointerEvents === "auto"; x.removeChild(w); return !!v } function e() { var v = a.createElement("div"); return typeof v.getBoundingClientRect !== "undefined" } m.extend(m.mobile, { browser: {} }); m.mobile.browser.oldIE = (function () { var x = 3, y = a.createElement("div"), w = y.all || []; do { y.innerHTML = "<!--[if gt IE " + (++x) + "]><br><![endif]-->" } while (w[0]); return x > 4 ? x : !x })(); function n() { var E = b, x = navigator.userAgent, z = navigator.platform, D = x.match(/AppleWebKit\/([0-9]+)/), C = !!D && D[1], y = x.match(/Fennec\/([0-9]+)/), A = !!y && y[1], B = x.match(/Opera Mobi\/([0-9]+)/), v = !!B && B[1]; if (((z.indexOf("iPhone") > -1 || z.indexOf("iPad") > -1 || z.indexOf("iPod") > -1) && C && C < 534) || (E.operamini && ({}).toString.call(E.operamini) === "[object OperaMini]") || (B && v < 7458) || (x.indexOf("Android") > -1 && C && C < 533) || (A && A < 6) || ("palmGetResource" in b && C && C < 534) || (x.indexOf("MeeGo") > -1 && x.indexOf("NokiaBrowser/8.5.0") > -1)) { return false } return true } m.extend(m.support, { cssTransitions: "WebKitTransitionEvent" in b || l("transition", "height 100ms linear", ["Webkit", "Moz", ""]) && !m.mobile.browser.oldIE && !h, pushState: "pushState" in history && "replaceState" in history && (b.navigator.userAgent.search(/CriOS/) === -1), mediaquery: m.mobile.media("only all"), cssPseudoElement: !!g("content"), touchOverflow: !!g("overflowScrolling"), cssTransform3d: k(), boxShadow: !!g("boxShadow") && !p, fixedPosition: n(), scrollTop: ("pageXOffset" in b || "scrollTop" in a.documentElement || "scrollTop" in j[0]) && !u && !r, dynamicBaseTag: f(), cssPointerEvents: t(), boundingRect: e() }); j.remove(); var o = (function () { var v = b.navigator.userAgent; return v.indexOf("Nokia") > -1 && (v.indexOf("Symbian/3") > -1 || v.indexOf("Series60/5") > -1) && v.indexOf("AppleWebKit") > -1 && v.match(/(BrowserNG|NokiaBrowser)\/7\.[0-3]/) })(); m.mobile.gradeA = function () { return (m.support.mediaquery || m.mobile.browser.oldIE && m.mobile.browser.oldIE >= 7) && (m.support.boundingRect || m.fn.jquery.match(/1\.[0-7+]\.[0-9+]?/) !== null) }; m.mobile.ajaxBlacklist = b.blackberry && !b.WebKitPoint || r || o; if (o) { m(function () { m("head link[rel='stylesheet']").attr("rel", "alternate stylesheet").attr("rel", "stylesheet") }) } if (!m.support.boxShadow) { m("html").addClass("ui-mobile-nosupport-boxshadow") } })(c); (function (f, h) { var i = f.mobile.window, e, g; f.event.special.navigate = e = { bound: false, pushStateEnabled: true, originalEventName: h, isPushStateEnabled: function () { return f.support.pushState && f.mobile.pushStateEnabled === true && this.isHashChangeEnabled() }, isHashChangeEnabled: function () { return f.mobile.hashListeningEnabled === true }, popstate: function (k) { var m = new f.Event("navigate"), n = new f.Event("beforenavigate"), l = k.originalEvent.state || {}, j = location.href; i.trigger(n); if (n.isDefaultPrevented()) { return } if (k.historyState) { f.extend(l, k.historyState) } m.originalEvent = k; setTimeout(function () { i.trigger(m, { state: l }) }, 0) }, hashchange: function (j, l) { var k = new f.Event("navigate"), m = new f.Event("beforenavigate"); i.trigger(m); if (m.isDefaultPrevented()) { return } k.originalEvent = j; i.trigger(k, { state: j.hashchangeState || {} }) }, setup: function (k, j) { if (e.bound) { return } e.bound = true; if (e.isPushStateEnabled()) { e.originalEventName = "popstate"; i.bind("popstate.navigate", e.popstate) } else { if (e.isHashChangeEnabled()) { e.originalEventName = "hashchange"; i.bind("hashchange.navigate", e.hashchange) } } } } })(c); (function (h, j) { var i, e, f, g = "&ui-state=dialog"; h.mobile.path = i = { uiStateKey: "&ui-state", urlParseRE: /^\s*(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/, getLocation: function (k) { var l = k ? this.parseUrl(k) : location, m = this.parseUrl(k || location.href).hash; m = m === "#" ? "" : m; return l.protocol + "//" + l.host + l.pathname + l.search + m }, parseLocation: function () { return this.parseUrl(this.getLocation()) }, parseUrl: function (k) { if (h.type(k) === "object") { return k } var l = i.urlParseRE.exec(k || "") || []; return { href: l[0] || "", hrefNoHash: l[1] || "", hrefNoSearch: l[2] || "", domain: l[3] || "", protocol: l[4] || "", doubleSlash: l[5] || "", authority: l[6] || "", username: l[8] || "", password: l[9] || "", host: l[10] || "", hostname: l[11] || "", port: l[12] || "", pathname: l[13] || "", directory: l[14] || "", filename: l[15] || "", search: l[16] || "", hash: l[17] || "" } }, makePathAbsolute: function (n, m) { if (n && n.charAt(0) === "/") { return n } n = n || ""; m = m ? m.replace(/^\/|(\/[^\/]*|[^\/]+)$/g, "") : ""; var k = m ? m.split("/") : [], p = n.split("/"); for (var l = 0; l < p.length; l++) { var o = p[l]; switch (o) { case ".": break; case "..": if (k.length) { k.pop() } break; default: k.push(o); break } } return "/" + k.join("/") }, isSameDomain: function (l, k) { return i.parseUrl(l).domain === i.parseUrl(k).domain }, isRelativeUrl: function (k) { return i.parseUrl(k).protocol === "" }, isAbsoluteUrl: function (k) { return i.parseUrl(k).protocol !== "" }, makeUrlAbsolute: function (l, n) { if (!i.isRelativeUrl(l)) { return l } if (n === j) { n = this.documentBase } var p = i.parseUrl(l), s = i.parseUrl(n), t = p.protocol || s.protocol, m = p.protocol ? p.doubleSlash : (p.doubleSlash || s.doubleSlash), q = p.authority || s.authority, r = p.pathname !== "", k = i.makePathAbsolute(p.pathname || s.filename, s.pathname), u = p.search || (!r && s.search) || "", o = p.hash; return t + m + q + k + u + o }, addSearchParams: function (l, o) { var k = i.parseUrl(l), n = (typeof o === "object") ? h.param(o) : o, m = k.search || "?"; return k.hrefNoSearch + m + (m.charAt(m.length - 1) !== "?" ? "&" : "") + n + (k.hash || "") }, convertUrlToDataUrl: function (l) { var k = i.parseUrl(l); if (i.isEmbeddedPage(k)) { return k.hash.split(g)[0].replace(/^#/, "").replace(/\?.*$/, "") } else { if (i.isSameDomain(k, this.documentBase)) { return k.hrefNoHash.replace(this.documentBase.domain, "").split(g)[0] } } return b.decodeURIComponent(l) }, get: function (k) { if (k === j) { k = i.parseLocation().hash } return i.stripHash(k).replace(/[^\/]*\.[^\/*]+$/, "") }, set: function (k) { location.hash = k }, isPath: function (k) { return (/\//).test(k) }, clean: function (k) { return k.replace(this.documentBase.domain, "") }, stripHash: function (k) { return k.replace(/^#/, "") }, stripQueryParams: function (k) { return k.replace(/\?.*$/, "") }, cleanHash: function (k) { return i.stripHash(k.replace(/\?.*$/, "").replace(g, "")) }, isHashValid: function (k) { return (/^#[^#]+$/).test(k) }, isExternal: function (l) { var k = i.parseUrl(l); return k.protocol && k.domain !== this.documentUrl.domain ? true : false }, hasProtocol: function (k) { return (/^(:?\w+:)/).test(k) }, isEmbeddedPage: function (l) { var k = i.parseUrl(l); if (k.protocol !== "") { return (!this.isPath(k.hash) && k.hash && (k.hrefNoHash === this.documentUrl.hrefNoHash || (this.documentBaseDiffers && k.hrefNoHash === this.documentBase.hrefNoHash))) } return (/^#/).test(k.href) }, squash: function (l, t) { var k, m, s, u, n, q = this.isPath(l), o = this.parseUrl(l), r = o.hash, p = ""; t = t || (i.isPath(l) ? i.getLocation() : i.getDocumentUrl()); s = q ? i.stripHash(l) : l; s = i.isPath(o.hash) ? i.stripHash(o.hash) : s; n = s.indexOf(this.uiStateKey); if (n > -1) { p = s.slice(n); s = s.slice(0, n) } m = i.makeUrlAbsolute(s, t); u = this.parseUrl(m).search; if (q) { if (i.isPath(r) || r.replace("#", "").indexOf(this.uiStateKey) === 0) { r = "" } if (p && r.indexOf(this.uiStateKey) === -1) { r += p } if (r.indexOf("#") === -1 && r !== "") { r = "#" + r } m = i.parseUrl(m); m = m.protocol + "//" + m.host + m.pathname + u + r } else { m += m.indexOf("#") > -1 ? p : "#" + p } return m }, isPreservableHash: function (k) { return k.replace("#", "").indexOf(this.uiStateKey) === 0 } }; i.documentUrl = i.parseLocation(); f = h("head").find("base"); i.documentBase = f.length ? i.parseUrl(i.makeUrlAbsolute(f.attr("href"), i.documentUrl.href)) : i.documentUrl; i.documentBaseDiffers = (i.documentUrl.hrefNoHash !== i.documentBase.hrefNoHash); i.getDocumentUrl = function (k) { return k ? h.extend({}, i.documentUrl) : i.documentUrl.href }; i.getDocumentBase = function (k) { return k ? h.extend({}, i.documentBase) : i.documentBase.href } })(c); (function (e, g) { var f = e.mobile.path; e.mobile.History = function (h, i) { this.stack = h || []; this.activeIndex = i || 0 }; e.extend(e.mobile.History.prototype, { getActive: function () { return this.stack[this.activeIndex] }, getLast: function () { return this.stack[this.previousIndex] }, getNext: function () { return this.stack[this.activeIndex + 1] }, getPrev: function () { return this.stack[this.activeIndex - 1] }, add: function (h, i) { i = i || {}; if (this.getNext()) { this.clearForward() } if (i.hash && i.hash.indexOf("#") === -1) { i.hash = "#" + i.hash } i.url = h; this.stack.push(i); this.activeIndex = this.stack.length - 1 }, clearForward: function () { this.stack = this.stack.slice(0, this.activeIndex + 1) }, find: function (l, h, k) { h = h || this.stack; var o, m, n = h.length, j; for (m = 0; m < n; m++) { o = h[m]; if (decodeURIComponent(l) === decodeURIComponent(o.url) || decodeURIComponent(l) === decodeURIComponent(o.hash)) { j = m; if (k) { return j } } } return j }, closest: function (i) { var j, h = this.activeIndex; j = this.find(i, this.stack.slice(0, h)); if (j === g) { j = this.find(i, this.stack.slice(h), true); j = j === g ? j : j + h } return j }, direct: function (i) { var j = this.closest(i.url), h = this.activeIndex; if (j !== g) { this.activeIndex = j; this.previousIndex = h } if (j < h) { (i.present || i.back || e.noop)(this.getActive(), "back") } else { if (j > h) { (i.present || i.forward || e.noop)(this.getActive(), "forward") } else { if (j === g && i.missing) { i.missing(this.getActive()) } } } } }) })(c); (function (e, g) { var f = e.mobile.path; e.mobile.Navigator = function (h) { this.history = h; this.ignoreInitialHashChange = true; setTimeout(e.proxy(function () { this.ignoreInitialHashChange = false }, this), 200); e.mobile.window.bind({ "popstate.history": e.proxy(this.popstate, this), "hashchange.history": e.proxy(this.hashchange, this) }) }; e.extend(e.mobile.Navigator.prototype, { squash: function (i, k) { var j, h, l = f.isPath(i) ? f.stripHash(i) : i; h = f.squash(i); j = e.extend({ hash: l, url: h }, k); b.history.replaceState(j, j.title || a.title, h); return j }, hash: function (k, j) { var i, m, l; i = f.parseUrl(k); m = f.parseLocation(); if (m.pathname + m.search === i.pathname + i.search) { l = i.hash ? i.hash : i.pathname + i.search } else { if (f.isPath(k)) { var h = f.parseUrl(j); l = h.pathname + h.search + (f.isPreservableHash(h.hash) ? h.hash.replace("#", "") : "") } else { l = k } } return l }, go: function (j, m, h) { var l, i, n, o, k = e.event.special.navigate.isPushStateEnabled(); i = f.squash(j); n = this.hash(j, i); if (h && n !== f.stripHash(f.parseLocation().hash)) { this.preventNextHashChange = h } this.preventHashAssignPopState = true; b.location.hash = n; this.preventHashAssignPopState = false; l = e.extend({ url: i, hash: n, title: a.title }, m); if (k) { o = new e.Event("popstate"); o.originalEvent = { type: "popstate", state: null }; this.squash(j, l); if (!h) { this.ignorePopState = true; e.mobile.window.trigger(o) } } this.history.add(l.url, l) }, popstate: function (i) { var l, k, j, h; if (!e.event.special.navigate.isPushStateEnabled()) { return } if (this.preventHashAssignPopState) { this.preventHashAssignPopState = false; i.stopImmediatePropagation(); return } if (this.ignorePopState) { this.ignorePopState = false; return } if (!i.originalEvent.state && this.history.stack.length === 1 && this.ignoreInitialHashChange) { this.ignoreInitialHashChange = false; return } k = f.parseLocation().hash; if (!i.originalEvent.state && k) { j = this.squash(k); this.history.add(j.url, j); i.historyState = j; return } this.history.direct({ url: (i.originalEvent.state || {}).url || k, present: function (n, m) { i.historyState = e.extend({}, n); i.historyState.direction = m } }) }, hashchange: function (h) { var j, i; if (!e.event.special.navigate.isHashChangeEnabled() || e.event.special.navigate.isPushStateEnabled()) { return } if (this.preventNextHashChange) { this.preventNextHashChange = false; h.stopImmediatePropagation(); return } j = this.history; i = f.parseLocation().hash; this.history.direct({ url: i, present: function (l, k) { h.hashchangeState = e.extend({}, l); h.hashchangeState.direction = k }, missing: function () { j.add(i, { hash: i, title: a.title }) } }) } }) })(c); (function (e, g) { e.mobile.navigate = function (i, j, h) { e.mobile.navigate.navigator.go(i, j, h) }; e.mobile.navigate.history = new e.mobile.History(); e.mobile.navigate.navigator = new e.mobile.Navigator(e.mobile.navigate.history); var f = e.mobile.path.parseLocation(); e.mobile.navigate.history.add(f.href, { hash: f.hash }) })(c); (function (B, K, j, q) { var J = "virtualMouseBindings", f = "virtualTouchID", e = "vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "), A = "clientX clientY pageX pageY screenX screenY".split(" "), G = B.event.mouseHooks ? B.event.mouseHooks.props : [], C = B.event.props.concat(G), E = {}, L = 0, w = 0, v = 0, t = false, O = [], l = false, V = false, y = "addEventListener" in j, x = B(j), I = 1, R = 0, g; B.vmouse = { moveDistanceThreshold: 10, clickDistanceThreshold: 10, resetTimerDuration: 1500 }; function u(i) { while (i && typeof i.originalEvent !== "undefined") { i = i.originalEvent } return i } function m(X, Y) { var ag = X.type, ah, af, Z, W, ad, ac, ab, aa, ae; X = B.Event(X); X.type = Y; ah = X.originalEvent; af = B.event.props; if (ag.search(/^(mouse|click)/) > -1) { af = C } if (ah) { for (ab = af.length, W; ab;) { W = af[--ab]; X[W] = ah[W] } } if (ag.search(/mouse(down|up)|click/) > -1 && !X.which) { X.which = 1 } if (ag.search(/^touch/) !== -1) { Z = u(ah); ag = Z.touches; ad = Z.changedTouches; ac = (ag && ag.length) ? ag[0] : ((ad && ad.length) ? ad[0] : q); if (ac) { for (aa = 0, ae = A.length; aa < ae; aa++) { W = A[aa]; X[W] = ac[W] } } } return X } function T(Y) { var W = {}, i, X; while (Y) { i = B.data(Y, J); for (X in i) { if (i[X]) { W[X] = W.hasVirtualBinding = true } } Y = Y.parentNode } return W } function F(X, W) { var i; while (X) { i = B.data(X, J); if (i && (!W || i[W])) { return X } X = X.parentNode } return null } function N() { V = false } function o() { V = true } function U() { R = 0; O.length = 0; l = false; o() } function s() { N() } function z() { D(); L = setTimeout(function () { L = 0; U() }, B.vmouse.resetTimerDuration) } function D() { if (L) { clearTimeout(L); L = 0 } } function r(X, Y, i) { var W; if ((i && i[X]) || (!i && F(Y.target, X))) { W = m(Y, X); B(Y.target).trigger(W) } return W } function n(W) { var X = B.data(W.target, f); if (!l && (!R || R !== X)) { var i = r("v" + W.type, W); if (i) { if (i.isDefaultPrevented()) { W.preventDefault() } if (i.isPropagationStopped()) { W.stopPropagation() } if (i.isImmediatePropagationStopped()) { W.stopImmediatePropagation() } } } } function S(X) { var Z = u(X).touches, Y, i; if (Z && Z.length === 1) { Y = X.target; i = T(Y); if (i.hasVirtualBinding) { R = I++; B.data(Y, f, R); D(); s(); t = false; var W = u(X).touches[0]; w = W.pageX; v = W.pageY; r("vmouseover", X, i); r("vmousedown", X, i) } } } function M(i) { if (V) { return } if (!t) { r("vmousecancel", i, T(i.target)) } t = true; z() } function h(Z) { if (V) { return } var X = u(Z).touches[0], W = t, Y = B.vmouse.moveDistanceThreshold, i = T(Z.target); t = t || (Math.abs(X.pageX - w) > Y || Math.abs(X.pageY - v) > Y); if (t && !W) { r("vmousecancel", Z, i) } r("vmousemove", Z, i); z() } function k(Y) { if (V) { return } o(); var i = T(Y.target), X; r("vmouseup", Y, i); if (!t) { var W = r("vclick", Y, i); if (W && W.isDefaultPrevented()) { X = u(Y).changedTouches[0]; O.push({ touchID: R, x: X.clientX, y: X.clientY }); l = true } } r("vmouseout", Y, i); t = false; z() } function H(W) { var X = B.data(W, J), i; if (X) { for (i in X) { if (X[i]) { return true } } } return false } function Q() { } function p(i) { var W = i.substr(1); return { setup: function (Y, X) { if (!H(this)) { B.data(this, J, {}) } var Z = B.data(this, J); Z[i] = true; E[i] = (E[i] || 0) + 1; if (E[i] === 1) { x.bind(W, n) } B(this).bind(W, Q); if (y) { E.touchstart = (E.touchstart || 0) + 1; if (E.touchstart === 1) { x.bind("touchstart", S).bind("touchend", k).bind("touchmove", h).bind("scroll", M) } } }, teardown: function (Y, X) { --E[i]; if (!E[i]) { x.unbind(W, n) } if (y) { --E.touchstart; if (!E.touchstart) { x.unbind("touchstart", S).unbind("touchmove", h).unbind("touchend", k).unbind("scroll", M) } } var Z = B(this), aa = B.data(this, J); if (aa) { aa[i] = false } Z.unbind(W, Q); if (!H(this)) { Z.removeData(J) } } } } for (var P = 0; P < e.length; P++) { B.event.special[e[P]] = p(e[P]) } if (y) { j.addEventListener("click", function (aa) { var X = O.length, ab = aa.target, ad, ac, ae, Z, W, Y; if (X) { ad = aa.clientX; ac = aa.clientY; g = B.vmouse.clickDistanceThreshold; ae = ab; while (ae) { for (Z = 0; Z < X; Z++) { W = O[Z]; Y = 0; if ((ae === ab && Math.abs(W.x - ad) < g && Math.abs(W.y - ac) < g) || B.data(ae, f) === W.touchID) { aa.preventDefault(); aa.stopPropagation(); return } } ae = ae.parentNode } } }, true) } })(c, b, a); (function (h, m, e) { var f = h(a); h.each(("touchstart touchmove touchend tap taphold swipe swiperight swipeleft scrollstart scrollstop").split(" "), function (p, o) { h.fn[o] = function (q) { return q ? this.bind(o, q) : this.trigger(o) }; if (h.attrFn) { h.attrFn[o] = true } }); var i = h.mobile.support.touch, j = "touchmove scroll", n = i ? "touchstart" : "mousedown", l = i ? "touchend" : "mouseup", g = i ? "touchmove" : "mousemove"; function k(r, o, q) { var p = q.type; q.type = o; h.event.dispatch.call(r, q); q.type = p } h.event.special.scrollstart = { enabled: true, setup: function () { var o = this, r = h(o), q, s; function p(t, u) { q = u; k(o, q ? "scrollstart" : "scrollstop", t) } r.bind(j, function (t) { if (!h.event.special.scrollstart.enabled) { return } if (!q) { p(t, true) } clearTimeout(s); s = setTimeout(function () { p(t, false) }, 50) }) } }; h.event.special.tap = { tapholdThreshold: 750, setup: function () { var o = this, p = h(o); p.bind("vmousedown", function (t) { if (t.which && t.which !== 1) { return false } var s = t.target, q = t.originalEvent, w; function r() { clearTimeout(w) } function v() { r(); p.unbind("vclick", u).unbind("vmouseup", r); f.unbind("vmousecancel", v) } function u(x) { v(); if (s === x.target) { k(o, "tap", x) } } p.bind("vmouseup", r).bind("vclick", u); f.bind("vmousecancel", v); w = setTimeout(function () { k(o, "taphold", h.Event("taphold", { target: s })) }, h.event.special.tap.tapholdThreshold) }) } }; h.event.special.swipe = { scrollSupressionThreshold: 30, durationThreshold: 1000, horizontalDistanceThreshold: 30, verticalDistanceThreshold: 75, start: function (o) { var p = o.originalEvent.touches ? o.originalEvent.touches[0] : o; return { time: (new Date()).getTime(), coords: [p.pageX, p.pageY], origin: h(o.target) } }, stop: function (o) { var p = o.originalEvent.touches ? o.originalEvent.touches[0] : o; return { time: (new Date()).getTime(), coords: [p.pageX, p.pageY] } }, handleSwipe: function (p, o) { if (o.time - p.time < h.event.special.swipe.durationThreshold && Math.abs(p.coords[0] - o.coords[0]) > h.event.special.swipe.horizontalDistanceThreshold && Math.abs(p.coords[1] - o.coords[1]) < h.event.special.swipe.verticalDistanceThreshold) { p.origin.trigger("swipe").trigger(p.coords[0] > o.coords[0] ? "swipeleft" : "swiperight") } }, setup: function () { var o = this, p = h(o); p.bind(n, function (r) { var t = h.event.special.swipe.start(r), q; function s(u) { if (!t) { return } q = h.event.special.swipe.stop(u); if (Math.abs(t.coords[0] - q.coords[0]) > h.event.special.swipe.scrollSupressionThreshold) { u.preventDefault() } } p.bind(g, s).one(l, function () { p.unbind(g, s); if (t && q) { h.event.special.swipe.handleSwipe(t, q) } t = q = e }) }) } }; h.each({ scrollstop: "scrollstart", taphold: "tap", swiperight: "swipe", swipeleft: "swipe" }, function (p, o) { h.event.special[p] = { setup: function () { h(this).bind(o, h.noop) } } }) })(c, this); (function (i) { i.event.special.throttledresize = { setup: function () { i(this).bind("resize", g) }, teardown: function () { i(this).unbind("resize", g) } }; var h = 250, g = function () { k = (new Date()).getTime(); j = k - f; if (j >= h) { f = k; i(this).trigger("throttledresize") } else { if (e) { clearTimeout(e) } e = setTimeout(g, h - j) } }, f = 0, e, k, j })(c); (function (k, p) { var n = k(p), m = "orientationchange", e, g, l, h, q, o = { "0": true, "180": true }; if (k.support.orientation) { var j = p.innerWidth || n.width(), f = p.innerHeight || n.height(), i = 50; h = j > f && (j - f) > i; q = o[p.orientation]; if ((h && q) || (!h && !q)) { o = { "-90": true, "90": true } } } k.event.special.orientationchange = k.extend({}, k.event.special.orientationchange, { setup: function () { if (k.support.orientation && !k.event.special.orientationchange.disabled) { return false } l = g(); n.bind("throttledresize", r) }, teardown: function () { if (k.support.orientation && !k.event.special.orientationchange.disabled) { return false } n.unbind("throttledresize", r) }, add: function (s) { var t = s.handler; s.handler = function (u) { u.orientation = g(); return t.apply(this, arguments) } } }); function r() { var s = g(); if (s !== l) { l = s; n.trigger(m) } } k.event.special.orientationchange.orientation = g = function () { var t = true, s = a.documentElement; if (k.support.orientation) { t = o[p.orientation] } else { t = s && s.clientWidth / s.clientHeight < 1.1 } return t ? "portrait" : "landscape" }; k.fn[m] = function (s) { return s ? this.bind(m, s) : this.trigger(m) }; if (k.attrFn) { k.attrFn[m] = true } }(c, this)); (function (e, f) { e.widget("mobile.page", e.mobile.widget, { options: { theme: "c", domCache: false, keepNativeDefault: ":jqmData(role='none'), :jqmData(role='nojs')" }, _create: function () { if (this._trigger("beforecreate") === false) { return false } this.element.attr("tabindex", "0").addClass("ui-page ui-body-" + this.options.theme); this._on(this.element, { pagebeforehide: "removeContainerBackground", pagebeforeshow: "_handlePageBeforeShow" }) }, _handlePageBeforeShow: function (g) { this.setContainerBackground() }, removeContainerBackground: function () { e.mobile.pageContainer.removeClass("ui-overlay-" + e.mobile.getInheritedTheme(this.element.parent())) }, setContainerBackground: function (g) { if (this.options.theme) { e.mobile.pageContainer.addClass("ui-overlay-" + (g || this.options.theme)) } }, keepNativeSelector: function () { var g = this.options, h = g.keepNative && e.trim(g.keepNative); if (h && g.keepNative !== g.keepNativeDefault) { return [g.keepNative, g.keepNativeDefault].join(", ") } return g.keepNativeDefault } }) })(c); (function (j, g, k) { var f = function (l) { if (l === k) { l = true } return function (E, v, n, C) { var D = new j.Deferred(), m = v ? " reverse" : "", t = j.mobile.urlHistory.getActive(), z = t.lastScroll || j.mobile.defaultHomeScroll, B = j.mobile.getScreenHeight(), q = j.mobile.maxTransitionWidth !== false && j.mobile.window.width() > j.mobile.maxTransitionWidth, p = !j.support.cssTransitions || q || !E || E === "none" || Math.max(j.mobile.window.scrollTop(), z) > j.mobile.getMaxScrollForTransition(), o = " ui-page-pre-in", r = function () { j.mobile.pageContainer.toggleClass("ui-mobile-viewport-transitioning viewport-" + E) }, A = function () { j.event.special.scrollstart.enabled = false; g.scrollTo(0, z); setTimeout(function () { j.event.special.scrollstart.enabled = true }, 150) }, s = function () { C.removeClass(j.mobile.activePageClass + " out in reverse " + E).height("") }, x = function () { if (!l) { y() } else { C.animationComplete(y) } C.height(B + j.mobile.window.scrollTop()).addClass(E + " out" + m) }, y = function () { if (C && l) { s() } u() }, u = function () { n.css("z-index", -10); n.addClass(j.mobile.activePageClass + o); j.mobile.focusPage(n); n.height(B + z); A(); n.css("z-index", ""); if (!p) { n.animationComplete(w) } n.removeClass(o).addClass(E + " in" + m); if (p) { w() } }, w = function () { if (!l) { if (C) { s() } } n.removeClass("out in reverse " + E).height(""); r(); if (j.mobile.window.scrollTop() !== z) { A() } D.resolve(E, v, n, C, true) }; r(); if (C && !p) { x() } else { y() } return D.promise() } }; var i = f(), h = f(false), e = function () { return j.mobile.getScreenHeight() * 3 }; j.mobile.defaultTransitionHandler = i; j.mobile.transitionHandlers = { "default": j.mobile.defaultTransitionHandler, sequential: i, simultaneous: h }; j.mobile.transitionFallbacks = {}; j.mobile._maybeDegradeTransition = function (l) { if (l && !j.support.cssTransform3d && j.mobile.transitionFallbacks[l]) { l = j.mobile.transitionFallbacks[l] } return l }; j.mobile.getMaxScrollForTransition = j.mobile.getMaxScrollForTransition || e })(c, this); (function (l, n) { var w = l.mobile.window, z = l("html"), s = l("head"), y = l.extend(l.mobile.path, { getFilePath: function (K) { var J = "&" + l.mobile.subPageUrlKey; return K && K.split(J)[0].split(H)[0] }, isFirstPageUrl: function (L) { var K = y.parseUrl(y.makeUrlAbsolute(L, this.documentBase)), N = K.hrefNoHash === this.documentUrl.hrefNoHash || (this.documentBaseDiffers && K.hrefNoHash === this.documentBase.hrefNoHash), J = l.mobile.firstPage, M = J && J[0] ? J[0].id : n; return N && (!K.hash || K.hash === "#" || (M && K.hash.replace(/^#/, "") === M)) }, isPermittedCrossDomainRequest: function (K, J) { return l.mobile.allowCrossDomainPages && K.protocol === "file:" && J.search(/^https?:/) !== -1 } }), o = null, I = null, i = l.Deferred(), j = l.mobile.navigate.history, B = "[tabindex],a,button:visible,select:visible,input", u = [], D = false, H = "&ui-state=dialog", r = s.children("base"), k = y.documentUrl, C = y.documentBase, f = y.documentBaseDiffers, q = l.mobile.getScreenHeight; var m = l.support.dynamicBaseTag ? { element: (r.length ? r : l("<base>", { href: C.hrefNoHash }).prependTo(s)), set: function (J) { J = y.parseUrl(J).hrefNoHash; m.element.attr("href", y.makeUrlAbsolute(J, C)) }, reset: function () { m.element.attr("href", C.hrefNoSearch) } } : n; l.mobile.getDocumentUrl = y.getDocumentUrl; l.mobile.getDocumentBase = y.getDocumentBase; l.mobile.back = function () { var J = b.navigator; if (this.phonegapNavigationEnabled && J && J.app && J.app.backHistory) { J.app.backHistory() } else { b.history.back() } }; l.mobile.focusPage = function (K) { var L = K.find("[autofocus]"), J = K.find(".ui-title:eq(0)"); if (L.length) { L.focus(); return } if (J.length) { J.focus() } else { K.focus() } }; function F(J) { if (!!I && (!I.closest("." + l.mobile.activePageClass).length || J)) { I.removeClass(l.mobile.activeBtnClass) } I = null } function x() { D = false; if (u.length > 0) { l.mobile.changePage.apply(null, u.pop()) } } var t = true, g, G; g = function () { if (!t) { return } var K = l.mobile.urlHistory.getActive(); if (K) { var J = w.scrollTop(); K.lastScroll = J < l.mobile.minScrollBack ? l.mobile.defaultHomeScroll : J } }; G = function () { setTimeout(g, 100) }; w.bind(l.support.pushState ? "popstate" : "hashchange", function () { t = false }); w.one(l.support.pushState ? "popstate" : "hashchange", function () { t = true }); w.one("pagecontainercreate", function () { l.mobile.pageContainer.bind("pagechange", function () { t = true; w.unbind("scrollstop", G); w.bind("scrollstop", G) }) }); w.bind("scrollstop", G); l.mobile._maybeDegradeTransition = l.mobile._maybeDegradeTransition || function (J) { return J }; function E(L, M, O, J) { if (M) { M.data("mobile-page")._trigger("beforehide", null, { nextPage: L }) } L.data("mobile-page")._trigger("beforeshow", null, { prevPage: M || l("") }); l.mobile.hidePageLoadingMsg(); O = l.mobile._maybeDegradeTransition(O); var K = l.mobile.transitionHandlers[O || "default"] || l.mobile.defaultTransitionHandler, N = K(O, J, L, M); N.done(function () { if (M) { M.data("mobile-page")._trigger("hide", null, { nextPage: L }) } L.data("mobile-page")._trigger("show", null, { prevPage: M || l("") }) }); return N } l.mobile.resetActivePageHeight = function e(K) { var M = l("." + l.mobile.activePageClass), N = parseFloat(M.css("padding-top")), J = parseFloat(M.css("padding-bottom")), L = parseFloat(M.css("border-top-width")), O = parseFloat(M.css("border-bottom-width")); K = (typeof K === "number") ? K : q(); M.css("min-height", K - N - J - L - O) }; function A(J, K) { if (K) { J.attr("data-" + l.mobile.ns + "role", K) } J.page() } function v() { var J = (l.mobile.activePage && h(l.mobile.activePage)); return J || C.hrefNoHash } l.fn.animationComplete = function (J) { if (l.support.cssTransitions) { return l(this).one("webkitAnimationEnd animationend", J) } else { setTimeout(J, 0); return l(this) } }; l.mobile.path = y; l.mobile.base = m; l.mobile.urlHistory = j; l.mobile.dialogHashKey = H; l.mobile.allowCrossDomainPages = false; l.mobile._bindPageRemove = function () { var J = l(this); if (!J.data("mobile-page").options.domCache && J.is(":jqmData(external-page='true')")) { J.bind("pagehide.remove", function (M) { var L = l(this), K = new l.Event("pageremove"); L.trigger(K); if (!K.isDefaultPrevented()) { L.removeWithDependents() } }) } }; l.mobile.loadPage = function (K, W) { var V = l.Deferred(), L = l.extend({}, l.mobile.loadPage.defaults, W), O = null, T = null, M = y.makeUrlAbsolute(K, v()); if (L.data && L.type === "get") { M = y.addSearchParams(M, L.data); L.data = n } if (L.data && L.type === "post") { L.reloadPage = true } var S = y.getFilePath(M), P = y.convertUrlToDataUrl(M); L.pageContainer = L.pageContainer || l.mobile.pageContainer; O = L.pageContainer.children("[data-" + l.mobile.ns + "url='" + P + "']"); if (O.length === 0 && P && !y.isPath(P)) { O = L.pageContainer.children("#" + P).attr("data-" + l.mobile.ns + "url", P).jqmData("url", P) } if (O.length === 0) { if (l.mobile.firstPage && y.isFirstPageUrl(S)) { if (l.mobile.firstPage.parent().length) { O = l(l.mobile.firstPage) } } else { if (y.isEmbeddedPage(S)) { V.reject(M, W); return V.promise() } } } if (O.length) { if (!L.reloadPage) { A(O, L.role); V.resolve(M, W, O); return V.promise() } T = O } var N = L.pageContainer, U = new l.Event("pagebeforeload"), J = { url: K, absUrl: M, dataUrl: P, deferred: V, options: L }; N.trigger(U, J); if (U.isDefaultPrevented()) { return V.promise() } if (L.showLoadMsg) { var R = setTimeout(function () { l.mobile.showPageLoadingMsg() }, L.loadMsgDelay), Q = function () { clearTimeout(R); l.mobile.hidePageLoadingMsg() } } if (m) { m.reset() } if (!(l.mobile.allowCrossDomainPages || y.isSameDomain(k, M))) { V.reject(M, W) } else { l.ajax({ url: S, type: L.type, data: L.data, dataType: "html", success: function (Z, ae, ad) { var aa = l("<div></div>"), X = Z.match(/<title[^>]*>([^<]*)/) && RegExp.$1, ac = new RegExp("(<[^>]+\\bdata-" + l.mobile.ns + "role=[\"']?page[\"']?[^>]*>)"), Y = new RegExp("\\bdata-" + l.mobile.ns + "url=[\"']?([^\"'>]*)[\"']?"); if (ac.test(Z) && RegExp.$1 && Y.test(RegExp.$1) && RegExp.$1) { K = S = y.getFilePath(l("<div>" + RegExp.$1 + "</div>").text()) } if (m) { m.set(S) } aa.get(0).innerHTML = Z; O = aa.find(":jqmData(role='page'), :jqmData(role='dialog')").first(); if (!O.length) { O = l("<div data-" + l.mobile.ns + "role='page'>" + (Z.split(/<\/?body[^>]*>/gmi)[1] || "") + "</div>") } if (X && !O.jqmData("title")) { if (~X.indexOf("&")) { X = l("<div>" + X + "</div>").text() } O.jqmData("title", X) } if (!l.support.dynamicBaseTag) { var ab = y.get(S); O.find("[src], link[href], a[rel='external'], :jqmData(ajax='false'), a[target]").each(function () { var ag = l(this).is("[href]") ? "href" : l(this).is("[src]") ? "src" : "action", af = l(this).attr(ag); af = af.replace(location.protocol + "//" + location.host + location.pathname, ""); if (!/^(\w+:|#|\/)/.test(af)) { l(this).attr(ag, ab + af) } }) } O.attr("data-" + l.mobile.ns + "url", y.convertUrlToDataUrl(S)).attr("data-" + l.mobile.ns + "external-page", true).appendTo(L.pageContainer); O.one("pagecreate", l.mobile._bindPageRemove); A(O, L.role); if (M.indexOf("&" + l.mobile.subPageUrlKey) > -1) { O = L.pageContainer.children("[data-" + l.mobile.ns + "url='" + P + "']") } if (L.showLoadMsg) { Q() } J.xhr = ad; J.textStatus = ae; J.page = O; L.pageContainer.trigger("pageload", J); V.resolve(M, W, O, T) }, error: function (Z, aa, X) { if (m) { m.set(y.get()) } J.xhr = Z; J.textStatus = aa; J.errorThrown = X; var Y = new l.Event("pageloadfailed"); L.pageContainer.trigger(Y, J); if (Y.isDefaultPrevented()) { return } if (L.showLoadMsg) { Q(); l.mobile.showPageLoadingMsg(l.mobile.pageLoadErrorMessageTheme, l.mobile.pageLoadErrorMessage, true); setTimeout(l.mobile.hidePageLoadingMsg, 1500) } V.reject(M, W) } }) } return V.promise() }; l.mobile.loadPage.defaults = { type: "get", data: n, reloadPage: false, role: n, showLoadMsg: false, pageContainer: n, loadMsgDelay: 50 }; l.mobile.changePage = function (O, M) { if (D) { u.unshift(arguments); return } var Y = l.extend({}, l.mobile.changePage.defaults, M), L; Y.pageContainer = Y.pageContainer || l.mobile.pageContainer; Y.fromPage = Y.fromPage || l.mobile.activePage; L = (typeof O === "string"); var T = Y.pageContainer, N = new l.Event("pagebeforechange"), J = { toPage: O, options: Y }; if (L) { J.absUrl = y.makeUrlAbsolute(O, v()) } else { J.absUrl = O.data("absUrl") } T.trigger(N, J); if (N.isDefaultPrevented()) { return } O = J.toPage; L = (typeof O === "string"); D = true; if (L) { Y.target = O; l.mobile.loadPage(O, Y).done(function (af, ae, ag, ad) { D = false; ae.duplicateCachedPage = ad; ag.data("absUrl", J.absUrl); l.mobile.changePage(ag, ae) }).fail(function (ae, ad) { D = false; F(true); x(); Y.pageContainer.trigger("pagechangefailed", J) }); return } if (O[0] === l.mobile.firstPage[0] && !Y.dataUrl) { Y.dataUrl = k.hrefNoHash } var ac = Y.fromPage, P = (Y.dataUrl && y.convertUrlToDataUrl(Y.dataUrl)) || O.jqmData("url"), W = P, V = y.getFilePath(P), S = j.getActive(), K = j.activeIndex === 0, U = 0, Q = a.title, R = Y.role === "dialog" || O.jqmData("role") === "dialog"; if (ac && ac[0] === O[0] && !Y.allowSamePageTransition) { D = false; T.trigger("pagechange", J); if (Y.fromHashChange) { j.direct({ url: P }) } return } A(O, Y.role); if (Y.fromHashChange) { U = M.direction === "back" ? -1 : 1 } try { if (a.activeElement && a.activeElement.nodeName.toLowerCase() !== "body") { l(a.activeElement).blur() } else { l("input:focus, textarea:focus, select:focus").blur() } } catch (X) { } var ab = false; if (R && S) { if (S.url && S.url.indexOf(H) > -1 && l.mobile.activePage && !l.mobile.activePage.is(".ui-dialog") && j.activeIndex > 0) { Y.changeHash = false; ab = true } P = (S.url || ""); if (!ab && P.indexOf("#") > -1) { P += H } else { P += "#" + H } if (j.activeIndex === 0 && P === j.initialDst) { P += H } } var aa = (!S) ? Q : O.jqmData("title") || O.children(":jqmData(role='header')").find(".ui-title").getEncodedText(); if (!!aa && Q === a.title) { Q = aa } if (!O.jqmData("title")) { O.jqmData("title", Q) } Y.transition = Y.transition || ((U && !K) ? S.transition : n) || (R ? l.mobile.defaultDialogTransition : l.mobile.defaultPageTransition); if (!U && ab) { j.getActive().pageUrl = W } if (P && !Y.fromHashChange) { var Z; if (!y.isPath(P) && P.indexOf("#") < 0) { P = "#" + P } Z = { transition: Y.transition, title: Q, pageUrl: W, role: Y.role }; if (Y.changeHash !== false && l.mobile.hashListeningEnabled) { l.mobile.navigate(P, Z, true) } else { if (O[0] !== l.mobile.firstPage[0]) { l.mobile.navigate.history.add(P, Z) } } } a.title = Q; l.mobile.activePage = O; Y.reverse = Y.reverse || U < 0; E(O, ac, Y.transition, Y.reverse).done(function (ae, ad, ah, ag, af) { F(); if (Y.duplicateCachedPage) { Y.duplicateCachedPage.remove() } if (!af) { l.mobile.focusPage(O) } x(); T.trigger("pagechange", J) }) }; l.mobile.changePage.defaults = { transition: n, reverse: false, changeHash: true, fromHashChange: false, role: n, duplicateCachedPage: n, pageContainer: n, showLoadMsg: true, dataUrl: n, fromPage: n, allowSamePageTransition: false }; function p(J) { while (J) { if ((typeof J.nodeName === "string") && J.nodeName.toLowerCase() === "a") { break } J = J.parentNode } return J } function h(L) { var J = l(L).closest(".ui-page").jqmData("url"), K = C.hrefNoHash; if (!J || !y.isPath(J)) { J = K } return y.makeUrlAbsolute(J, K) } l.mobile.navreadyDeferred = l.Deferred(); l.mobile._registerInternalEvents = function () { var J = function (L, P) { var O, R, N, M = true, Q, K; if (!l.mobile.ajaxEnabled || L.is(":jqmData(ajax='false')") || !L.jqmHijackable().length) { return false } R = L.attr("target"); N = L.attr("action"); if (!N) { N = h(L); if (N === C.hrefNoHash) { N = k.hrefNoSearch } } N = y.makeUrlAbsolute(N, h(L)); if ((y.isExternal(N) && !y.isPermittedCrossDomainRequest(k, N)) || R) { return false } if (!P) { O = L.attr("method"); Q = L.serializeArray(); if (o && o[0].form === L[0]) { K = o.attr("name"); if (K) { l.each(Q, function (S, T) { if (T.name === K) { K = ""; return false } }); if (K) { Q.push({ name: K, value: o.attr("value") }) } } } M = { url: N, options: { type: O && O.length && O.toLowerCase() || "get", data: l.param(Q), transition: L.jqmData("transition"), reverse: L.jqmData("direction") === "reverse", reloadPage: true } } } return M }; l.mobile.document.delegate("form", "submit", function (K) { var L = J(l(this)); if (L) { l.mobile.changePage(L.url, L.options); K.preventDefault() } }); l.mobile.document.bind("vclick", function (N) { var M, L, O = N.target, K = false; if (N.which > 1 || !l.mobile.linkBindingEnabled) { return } o = l(O); if (l.data(O, "mobile-button")) { if (!J(l(O).closest("form"), true)) { return } if (O.parentNode) { O = O.parentNode } } else { O = p(O); if (!(O && y.parseUrl(O.getAttribute("href") || "#").hash !== "#")) { return } if (!l(O).jqmHijackable().length) { return } } if (!!~O.className.indexOf("ui-link-inherit")) { if (O.parentNode) { L = l.data(O.parentNode, "buttonElements") } } else { L = l.data(O, "buttonElements") } if (L) { O = L.outer } else { K = true } M = l(O); if (K) { M = M.closest(".ui-btn") } if (M.length > 0 && !M.hasClass("ui-disabled")) { F(true); I = M; I.addClass(l.mobile.activeBtnClass) } }); l.mobile.document.bind("click", function (K) { if (!l.mobile.linkBindingEnabled || K.isDefaultPrevented()) { return } var U = p(K.target), S = l(U), O; if (!U || K.which > 1 || !S.jqmHijackable().length) { return } O = function () { b.setTimeout(function () { F(true) }, 200) }; if (S.is(":jqmData(rel='back')")) { l.mobile.back(); return false } var R = h(S), M = y.makeUrlAbsolute(S.attr("href") || "#", R); if (!l.mobile.ajaxEnabled && !y.isEmbeddedPage(M)) { O(); return } if (M.search("#") !== -1) { M = M.replace(/[^#]*#/, ""); if (!M) { K.preventDefault(); return } else { if (y.isPath(M)) { M = y.makeUrlAbsolute(M, R) } else { M = y.makeUrlAbsolute("#" + M, k.hrefNoHash) } } } var N = S.is("[rel='external']") || S.is(":jqmData(ajax='false')") || S.is("[target]"), L = N || (y.isExternal(M) && !y.isPermittedCrossDomainRequest(k, M)); if (L) { O(); return } var T = S.jqmData("transition"), Q = S.jqmData("direction") === "reverse" || S.jqmData("back"), P = S.attr("data-" + l.mobile.ns + "rel") || n; l.mobile.changePage(M, { transition: T, reverse: Q, role: P, link: S }); K.preventDefault() }); l.mobile.document.delegate(".ui-page", "pageshow.prefetch", function () { var K = []; l(this).find("a:jqmData(prefetch)").each(function () { var L = l(this), M = L.attr("href"); if (M && l.inArray(M, K) === -1) { K.push(M); l.mobile.loadPage(M, { role: L.attr("data-" + l.mobile.ns + "rel") }) } }) }); l.mobile._handleHashChange = function (K, M) { var P = y.stripHash(K), O = l.mobile.urlHistory.stack.length === 0 ? "none" : n, L = { changeHash: false, fromHashChange: true, reverse: M.direction === "back" }; l.extend(L, M, { transition: (j.getLast() || {}).transition || O }); if (j.activeIndex > 0 && P.indexOf(H) > -1 && j.initialDst !== P) { if (l.mobile.activePage && !l.mobile.activePage.is(".ui-dialog")) { if (M.direction === "back") { l.mobile.back() } else { b.history.forward() } return } else { P = M.pageUrl; var N = l.mobile.urlHistory.getActive(); l.extend(L, { role: N.role, transition: N.transition, reverse: M.direction === "back" }) } } if (P) { P = !y.isPath(P) ? (y.makeUrlAbsolute("#" + P, C)) : P; if (P === y.makeUrlAbsolute("#" + j.initialDst, C) && j.stack.length && j.stack[0].url !== j.initialDst.replace(H, "")) { P = l.mobile.firstPage } l.mobile.changePage(P, L) } else { l.mobile.changePage(l.mobile.firstPage, L) } }; w.bind("navigate", function (M, L) { var K = l.event.special.navigate.originalEventName.indexOf("hashchange") > -1 ? L.state.hash : L.state.url; if (!K) { K = l.mobile.path.parseLocation().hash } if (!K || K === "#" || K.indexOf("#" + l.mobile.path.uiStateKey) === 0) { K = location.href } l.mobile._handleHashChange(K, L.state) }); l.mobile.document.bind("pageshow", l.mobile.resetActivePageHeight); l.mobile.window.bind("throttledresize", l.mobile.resetActivePageHeight) }; l(function () { i.resolve() }); l.when(i, l.mobile.navreadyDeferred).done(function () { l.mobile._registerInternalEvents() }) })(c); (function (f, e, g) { f.mobile.transitionFallbacks.flip = "fade" })(c, this); (function (f, e, g) { f.mobile.transitionFallbacks.flow = "fade" })(c, this); (function (f, e, g) { f.mobile.transitionFallbacks.pop = "fade" })(c, this); (function (f, e, g) { f.mobile.transitionHandlers.slide = f.mobile.transitionHandlers.simultaneous; f.mobile.transitionFallbacks.slide = "fade" })(c, this); (function (f, e, g) { f.mobile.transitionFallbacks.slidedown = "fade" })(c, this); (function (f, e, g) { f.mobile.transitionFallbacks.slidefade = "fade" })(c, this); (function (f, e, g) { f.mobile.transitionFallbacks.slideup = "fade" })(c, this); (function (f, e, g) { f.mobile.transitionFallbacks.turn = "fade" })(c, this); (function (e, f) { e.mobile.page.prototype.options.degradeInputs = { color: false, date: false, datetime: false, "datetime-local": false, email: false, month: false, number: false, range: "number", search: "text", tel: false, time: false, url: false, week: false }; e.mobile.document.bind("pagecreate create", function (i) { var h = e.mobile.closestPageData(e(i.target)), g; if (!h) { return } g = h.options; e(i.target).find("input").not(h.keepNativeSelector()).each(function () { var p = e(this), o = this.getAttribute("type"), k = g.degradeInputs[o] || "text"; if (g.degradeInputs[o]) { var n = e("<div>").html(p.clone()).html(), j = n.indexOf(" type=") > -1, m = j ? /\s+type=["']?\w+['"]?/ : /\/?>/, l = ' type="' + k + '" data-' + e.mobile.ns + 'type="' + o + '"' + (j ? "" : ">"); p.replaceWith(n.replace(m, l)) } }) }) })(c); (function (f, e, g) { f.widget("mobile.dialog", f.mobile.widget, { options: { closeBtn: "right", closeBtnText: "Close", overlayTheme: "a", corners: true, initSelector: ":jqmData(role='dialog')" }, _handlePageBeforeShow: function () { this._isCloseable = true; if (this.options.overlayTheme) { this.element.page("removeContainerBackground").page("setContainerBackground", this.options.overlayTheme) } }, _create: function () { var h = this, j = this.element, i = !!this.options.corners ? " ui-corner-all" : "", k = f("<div/>", { role: "dialog", "class": "ui-dialog-contain ui-overlay-shadow" + i }); j.addClass("ui-dialog ui-overlay-" + this.options.overlayTheme); j.wrapInner(k); j.bind("vclick submit", function (m) { var l = f(m.target).closest(m.type === "vclick" ? "a" : "form"), n; if (l.length && !l.jqmData("transition")) { n = f.mobile.urlHistory.getActive() || {}; l.attr("data-" + f.mobile.ns + "transition", (n.transition || f.mobile.defaultDialogTransition)).attr("data-" + f.mobile.ns + "direction", "reverse") } }); this._on(j, { pagebeforeshow: "_handlePageBeforeShow" }); f.extend(this, { _createComplete: false }); this._setCloseBtn(this.options.closeBtn) }, _setCloseBtn: function (k) { var i = this, j, h; if (this._headerCloseButton) { this._headerCloseButton.remove(); this._headerCloseButton = null } if (k !== "none") { h = (k === "right" ? "right" : "left"); j = f("<a href='#' class='ui-btn-" + h + "' data-" + f.mobile.ns + "icon='delete' data-" + f.mobile.ns + "iconpos='notext'>" + this.options.closeBtnText + "</a>"); this.element.children().find(":jqmData(role='header')").first().prepend(j); if (this._createComplete && f.fn.buttonMarkup) { j.buttonMarkup() } this._createComplete = true; j.bind("click", function () { i.close() }); this._headerCloseButton = j } }, _setOption: function (h, i) { if (h === "closeBtn") { this._setCloseBtn(i); this._super(h, i); this.element.attr("data-" + (f.mobile.ns || "") + "close-btn", i) } }, close: function () { var h, j, i = f.mobile.navigate.history; if (this._isCloseable) { this._isCloseable = false; if (f.mobile.hashListeningEnabled && i.activeIndex > 0) { f.mobile.back() } else { h = Math.max(0, i.activeIndex - 1); j = i.stack[h].pageUrl || i.stack[h].url; i.previousIndex = i.activeIndex; i.activeIndex = h; if (!f.mobile.path.isPath(j)) { j = f.mobile.path.makeUrlAbsolute("#" + j) } f.mobile.changePage(j, { direction: "back", changeHash: false, fromHashChange: true }) } } } }); f.mobile.document.delegate(f.mobile.dialog.prototype.options.initSelector, "pagecreate", function () { f.mobile.dialog.prototype.enhance(this) }) })(c, this); (function (e, f) { e.mobile.page.prototype.options.backBtnText = "Back"; e.mobile.page.prototype.options.addBackBtn = false; e.mobile.page.prototype.options.backBtnTheme = null; e.mobile.page.prototype.options.headerTheme = "a"; e.mobile.page.prototype.options.footerTheme = "a"; e.mobile.page.prototype.options.contentTheme = null; e.mobile.document.bind("pagecreate", function (j) { var g = e(j.target), k = g.data("mobile-page").options, i = g.jqmData("role"), h = k.theme; e(":jqmData(role='header'), :jqmData(role='footer'), :jqmData(role='content')", g).jqmEnhanceable().each(function () { var q = e(this), m = q.jqmData("role"), n = q.jqmData("theme"), l = n || k.contentTheme || (i === "dialog" && h), p, t, r, o; q.addClass("ui-" + m); if (m === "header" || m === "footer") { var s = n || (m === "header" ? k.headerTheme : k.footerTheme) || h; q.addClass("ui-bar-" + s).attr("role", m === "header" ? "banner" : "contentinfo"); if (m === "header") { p = q.children("a, button"); t = p.hasClass("ui-btn-right"); r = p.hasClass("ui-btn-left"); t = t || p.eq(0).not(".ui-btn-left").addClass("ui-btn-right").length; r = r || p.eq(1).addClass("ui-btn-left").length } if (k.addBackBtn && m === "header" && e(".ui-page").length > 1 && g.jqmData("url") !== e.mobile.path.stripHash(location.hash) && !t) { o = e("<a href='javascript:void(0);' class='ui-btn-right' data-" + e.mobile.ns + "rel='back' data-" + e.mobile.ns + "icon='arrow-r'>" + k.backBtnText + "</a>").attr("data-" + e.mobile.ns + "theme", k.backBtnTheme || s).prependTo(q) } q.children("h1, h2, h3, h4, h5, h6").addClass("ui-title").attr({ role: "heading", "aria-level": "1" }) } else { if (m === "content") { if (l) { q.addClass("ui-body-" + (l)) } q.attr("role", "main") } } }) }) })(c); (function (e, f) { e.mobile.behaviors.addFirstLastClasses = { _getVisibles: function (h, g) { var i; if (g) { i = h.not(".ui-screen-hidden") } else { i = h.filter(":visible"); if (i.length === 0) { i = h.not(".ui-screen-hidden") } } return i }, _addFirstLastClasses: function (i, h, g) { i.removeClass("ui-first-child ui-last-child"); h.eq(0).addClass("ui-first-child").end().last().addClass("ui-last-child"); if (!g) { this.element.trigger("updatelayout") } } } })(c); (function (e, f) { e.fn.fieldcontain = function (g) { return this.addClass("ui-field-contain ui-body ui-br").contents().filter(function () { return (this.nodeType === 3 && !/\S/.test(this.nodeValue)) }).remove() }; e(a).bind("pagecreate create", function (g) { e(":jqmData(role='fieldcontain')", g.target).jqmEnhanceable().fieldcontain() }) })(c); (function (e, f) { e.fn.grid = function (g) { return this.each(function () { var l = e(this), m = e.extend({ grid: null }, g), n = l.children(), j = { solo: 1, a: 2, b: 3, c: 4, d: 5 }, h = m.grid, i; if (!h) { if (n.length <= 5) { for (var k in j) { if (j[k] === n.length) { h = k } } } else { h = "a"; l.addClass("ui-grid-duo") } } i = j[h]; l.addClass("ui-grid-" + h); n.filter(":nth-child(" + i + "n+1)").addClass("ui-block-a"); if (i > 1) { n.filter(":nth-child(" + i + "n+2)").addClass("ui-block-b") } if (i > 2) { n.filter(":nth-child(" + i + "n+3)").addClass("ui-block-c") } if (i > 3) { n.filter(":nth-child(" + i + "n+4)").addClass("ui-block-d") } if (i > 4) { n.filter(":nth-child(" + i + "n+5)").addClass("ui-block-e") } }) } })(c); (function (e, f) { e(a).bind("pagecreate create", function (g) { e(":jqmData(role='nojs')", g.target).addClass("ui-nojs") }) })(c); (function (e, f) { e.mobile.behaviors.formReset = { _handleFormReset: function () { this._on(this.element.closest("form"), { reset: function () { this._delay("_reset") } }) } } })(c); (function (g, i) { var e = function (m, k) { var l = m.getAttribute(k); return l === "true" ? true : l === "false" ? false : l === null ? i : l }; g.fn.buttonMarkup = function (r) { var p = this, t = "data-" + g.mobile.ns, C; r = (r && (g.type(r) === "object")) ? r : {}; for (var y = 0; y < p.length; y++) { var q = p.eq(y), A = q[0], x = g.extend({}, g.fn.buttonMarkup.defaults, { icon: r.icon !== i ? r.icon : e(A, t + "icon"), iconpos: r.iconpos !== i ? r.iconpos : e(A, t + "iconpos"), theme: r.theme !== i ? r.theme : e(A, t + "theme") || g.mobile.getInheritedTheme(q, "c"), inline: r.inline !== i ? r.inline : e(A, t + "inline"), shadow: r.shadow !== i ? r.shadow : e(A, t + "shadow"), corners: r.corners !== i ? r.corners : e(A, t + "corners"), iconshadow: r.iconshadow !== i ? r.iconshadow : e(A, t + "iconshadow"), mini: r.mini !== i ? r.mini : e(A, t + "mini") }, r), v = "ui-btn-inner", k = "ui-btn-text", w, m, B = false, s = "up", n, l, u, z; for (C in x) { A.setAttribute(t + C, x[C]) } if (e(A, t + "rel") === "popup" && q.attr("href")) { A.setAttribute("aria-haspopup", true); A.setAttribute("aria-owns", q.attr("href")) } z = g.data(((A.tagName === "INPUT" || A.tagName === "BUTTON") ? A.parentNode : A), "buttonElements"); if (z) { A = z.outer; q = g(A); n = z.inner; l = z.text; g(z.icon).remove(); z.icon = null; B = z.hover; s = z.state } else { n = a.createElement(x.wrapperEls); l = a.createElement(x.wrapperEls) } u = x.icon ? a.createElement("span") : null; if (f && !z) { f() } if (!x.theme) { x.theme = g.mobile.getInheritedTheme(q, "c") } w = "ui-btn "; w += (B ? "ui-btn-hover-" + x.theme : ""); w += (s ? " ui-btn-" + s + "-" + x.theme : ""); w += x.shadow ? " ui-shadow" : ""; w += x.corners ? " ui-btn-corner-all" : ""; if (x.mini !== i) { w += x.mini === true ? " ui-mini" : " ui-fullsize" } if (x.inline !== i) { w += x.inline === true ? " ui-btn-inline" : " ui-btn-block" } if (x.icon) { x.icon = "ui-icon-" + x.icon; x.iconpos = x.iconpos || "right"; m = "ui-icon " + x.icon; if (x.iconshadow) { m += " ui-icon-shadow" } } if (x.iconpos) { w += " ui-btn-icon-" + x.iconpos; if (x.iconpos === "notext" && !q.attr("title")) { q.attr("title", q.getEncodedText()) } } if (x.iconpos && x.iconpos === "notext" && !q.attr("title")) { q.attr("title", q.getEncodedText()) } if (z) { q.removeClass(z.bcls || "") } q.removeClass("ui-link").addClass(w); n.className = v; l.className = k; if (!z) { n.appendChild(l) } if (u) { u.className = m; if (!(z && z.icon)) { u.innerHTML = "&#160;"; n.appendChild(u) } } while (A.firstChild && !z) { l.appendChild(A.firstChild) } if (!z) { A.appendChild(n) } z = { hover: B, state: s, bcls: w, outer: A, inner: n, text: l, icon: u }; g.data(A, "buttonElements", z); g.data(n, "buttonElements", z); g.data(l, "buttonElements", z); if (u) { g.data(u, "buttonElements", z) } } return this }; g.fn.buttonMarkup.defaults = { corners: true, shadow: true, iconshadow: true, wrapperEls: "span" }; function j(l) { var k; while (l) { k = (typeof l.className === "string") && (l.className + " "); if (k && k.indexOf("ui-btn ") > -1 && k.indexOf("ui-disabled ") < 0) { break } l = l.parentNode } return l } function h(o, l, n, m, p) { var k = g.data(o[0], "buttonElements"); o.removeClass(l).addClass(n); if (k) { k.bcls = g(a.createElement("div")).addClass(k.bcls + " " + n).removeClass(l).attr("class"); if (m !== i) { k.hover = m } k.state = p } } var f = function () { var l = g.mobile.buttonMarkup.hoverDelay, m, k; g.mobile.document.bind({ "vmousedown vmousecancel vmouseup vmouseover vmouseout focus blur scrollstart": function (p) { var r, o = g(j(p.target)), q = p.originalEvent && /^touch/.test(p.originalEvent.type), n = p.type; if (o.length) { r = o.attr("data-" + g.mobile.ns + "theme"); if (n === "vmousedown") { if (q) { m = setTimeout(function () { h(o, "ui-btn-up-" + r, "ui-btn-down-" + r, i, "down") }, l) } else { h(o, "ui-btn-up-" + r, "ui-btn-down-" + r, i, "down") } } else { if (n === "vmousecancel" || n === "vmouseup") { h(o, "ui-btn-down-" + r, "ui-btn-up-" + r, i, "up") } else { if (n === "vmouseover" || n === "focus") { if (q) { k = setTimeout(function () { h(o, "ui-btn-up-" + r, "ui-btn-hover-" + r, true, "") }, l) } else { h(o, "ui-btn-up-" + r, "ui-btn-hover-" + r, true, "") } } else { if (n === "vmouseout" || n === "blur" || n === "scrollstart") { h(o, "ui-btn-hover-" + r + " ui-btn-down-" + r, "ui-btn-up-" + r, false, "up"); if (m) { clearTimeout(m) } if (k) { clearTimeout(k) } } } } } } }, "focusin focus": function (n) { g(j(n.target)).addClass(g.mobile.focusClass) }, "focusout blur": function (n) { g(j(n.target)).removeClass(g.mobile.focusClass) } }); f = null }; g.mobile.document.bind("pagecreate create", function (k) { g(":jqmData(role='button'), .ui-bar > a, .ui-header > a, .ui-footer > a, .ui-bar > :jqmData(role='controlgroup') > a", k.target).jqmEnhanceable().not("button, input, .ui-btn, :jqmData(role='none'), :jqmData(role='nojs')").buttonMarkup() }) })(c); (function (e, f) { e.widget("mobile.collapsible", e.mobile.widget, { options: { expandCueText: " click to expand contents", collapseCueText: " click to collapse contents", collapsed: true, heading: "h1,h2,h3,h4,h5,h6,legend", collapsedIcon: "plus", expandedIcon: "minus", iconpos: "right", theme: null, contentTheme: null, inset: true, corners: true, mini: false, initSelector: ":jqmData(role='collapsible')" }, _create: function () { var i = this.element, l = this.options, j = i.addClass("ui-collapsible"), g = i.children(l.heading).first(), m = j.wrapInner("<div class='ui-collapsible-content'></div>").children(".ui-collapsible-content"), h = i.closest(":jqmData(role='collapsible-set')").addClass("ui-collapsible-set"), k = ""; if (g.is("legend")) { g = e("<div role='heading'>" + g.html() + "</div>").insertBefore(g); g.next().remove() } if (h.length) { if (!l.theme) { l.theme = h.jqmData("theme") || e.mobile.getInheritedTheme(h, "c") } if (!l.contentTheme) { l.contentTheme = h.jqmData("content-theme") } l.collapsedIcon = i.jqmData("collapsed-icon") || h.jqmData("collapsed-icon") || l.collapsedIcon; l.expandedIcon = i.jqmData("expanded-icon") || h.jqmData("expanded-icon") || l.expandedIcon; l.iconpos = i.jqmData("iconpos") || h.jqmData("iconpos") || l.iconpos; if (h.jqmData("inset") !== f) { l.inset = h.jqmData("inset") } else { l.inset = true } l.corners = false; if (!l.mini) { l.mini = h.jqmData("mini") } } else { if (!l.theme) { l.theme = e.mobile.getInheritedTheme(i, "c") } } if (!!l.inset) { k += " ui-collapsible-inset"; if (!!l.corners) { k += " ui-corner-all" } } if (l.contentTheme) { k += " ui-collapsible-themed-content"; m.addClass("ui-body-" + l.contentTheme) } if (k !== "") { j.addClass(k) } g.insertBefore(m).addClass("ui-collapsible-heading").append("<span class='ui-collapsible-heading-status'></span>").wrapInner("<a href='#' class='ui-collapsible-heading-toggle'></a>").find("a").first().buttonMarkup({ shadow: false, corners: false, iconpos: l.iconpos, icon: l.collapsedIcon, mini: l.mini, theme: l.theme }); j.bind("expand collapse", function (n) { if (!n.isDefaultPrevented()) { var p = e(this), o = (n.type === "collapse"); n.preventDefault(); g.toggleClass("ui-collapsible-heading-collapsed", o).find(".ui-collapsible-heading-status").text(o ? l.expandCueText : l.collapseCueText).end().find(".ui-icon").toggleClass("ui-icon-" + l.expandedIcon, !o).toggleClass("ui-icon-" + l.collapsedIcon, (o || l.expandedIcon === l.collapsedIcon)).end().find("a").first().removeClass(e.mobile.activeBtnClass); p.toggleClass("ui-collapsible-collapsed", o); m.toggleClass("ui-collapsible-content-collapsed", o).attr("aria-hidden", o); m.trigger("updatelayout") } }).trigger(l.collapsed ? "collapse" : "expand"); g.bind("tap", function (n) { g.find("a").first().addClass(e.mobile.activeBtnClass) }).bind("click", function (o) { var n = g.is(".ui-collapsible-heading-collapsed") ? "expand" : "collapse"; j.trigger(n); o.preventDefault(); o.stopPropagation() }) } }); e.mobile.document.bind("pagecreate create", function (g) { e.mobile.collapsible.prototype.enhanceWithin(g.target) }) })(c); (function (e, f) { e.widget("mobile.collapsibleset", e.mobile.widget, { options: { initSelector: ":jqmData(role='collapsible-set')" }, _create: function () { var g = this.element.addClass("ui-collapsible-set"), h = this.options; if (!h.theme) { h.theme = e.mobile.getInheritedTheme(g, "c") } if (!h.contentTheme) { h.contentTheme = g.jqmData("content-theme") } if (!h.corners) { h.corners = g.jqmData("corners") } if (g.jqmData("inset") !== f) { h.inset = g.jqmData("inset") } h.inset = h.inset !== f ? h.inset : true; h.corners = h.corners !== f ? h.corners : true; if (!!h.corners && !!h.inset) { g.addClass("ui-corner-all") } if (!g.jqmData("collapsiblebound")) { g.jqmData("collapsiblebound", true).bind("expand", function (j) { var i = e(j.target).closest(".ui-collapsible"); if (i.parent().is(":jqmData(role='collapsible-set')")) { i.siblings(".ui-collapsible").trigger("collapse") } }) } }, _init: function () { var h = this.element, i = h.children(":jqmData(role='collapsible')"), g = i.filter(":jqmData(collapsed='false')"); this._refresh("true"); g.trigger("expand") }, _refresh: function (g) { var h = this.element.children(":jqmData(role='collapsible')"); e.mobile.collapsible.prototype.enhance(h.not(".ui-collapsible")); this._addFirstLastClasses(h, this._getVisibles(h, g), g) }, refresh: function () { this._refresh(false) } }); e.widget("mobile.collapsibleset", e.mobile.collapsibleset, e.mobile.behaviors.addFirstLastClasses); e.mobile.document.bind("pagecreate create", function (g) { e.mobile.collapsibleset.prototype.enhanceWithin(g.target) }) })(c); (function (e, f) { e.widget("mobile.navbar", e.mobile.widget, { options: { iconpos: "top", grid: null, initSelector: ":jqmData(role='navbar')" }, _create: function () { var i = this.element, g = i.find("a"), h = g.filter(":jqmData(icon)").length ? this.options.iconpos : f; i.addClass("ui-navbar ui-mini").attr("role", "navigation").find("ul").jqmEnhanceable().grid({ grid: this.options.grid }); g.buttonMarkup({ corners: false, shadow: false, inline: true, iconpos: h }); i.delegate("a", "vclick", function (k) { if (!e(k.target).hasClass("ui-disabled")) { g.removeClass(e.mobile.activeBtnClass); e(this).addClass(e.mobile.activeBtnClass); var j = e(this); e(a).one("pagechange", function (l) { j.removeClass(e.mobile.activeBtnClass) }) } }); i.closest(".ui-page").bind("pagebeforeshow", function () { g.filter(".ui-state-persist").addClass(e.mobile.activeBtnClass) }) } }); e.mobile.document.bind("pagecreate create", function (g) { e.mobile.navbar.prototype.enhanceWithin(g.target) }) })(c); (function (e, g) { var f = {}; e.widget("mobile.listview", e.mobile.widget, { options: { theme: null, countTheme: "c", headerTheme: "b", dividerTheme: "b", icon: "arrow-l", splitIcon: "arrow-l", splitTheme: "b", corners: true, shadow: true, inset: false, initSelector: ":jqmData(role='listview')" }, _create: function () { var i = this, h = ""; h += i.options.inset ? " ui-listview-inset" : ""; if (!!i.options.inset) { h += i.options.corners ? " ui-corner-all" : ""; h += i.options.shadow ? " ui-shadow" : "" } i.element.addClass(function (j, k) { return k + " ui-listview" + h }); i.refresh(true) }, _findFirstElementByTagName: function (k, i, h, j) { var l = {}; l[h] = l[j] = true; while (k) { if (l[k.nodeName]) { return k } k = k[i] } return null }, _getChildrenByTagName: function (k, i, j) { var h = [], l = {}; l[i] = l[j] = true; k = k.firstChild; while (k) { if (l[k.nodeName]) { h.push(k) } k = k.nextSibling } return e(h) }, _addThumbClasses: function (l) { var k, j, h = l.length; for (k = 0; k < h; k++) { j = e(this._findFirstElementByTagName(l[k].firstChild, "nextSibling", "img", "IMG")); if (j.length) { j.addClass("ui-li-thumb"); e(this._findFirstElementByTagName(j[0].parentNode, "parentNode", "li", "LI")).addClass(j.is(".ui-li-icon") ? "ui-li-has-icon" : "ui-li-has-thumb") } } }, refresh: function (y) { this.parentPage = this.element.closest(".ui-page"); this._createSubPages(); var E = this.options, h = this.element, C = this, K = h.jqmData("dividertheme") || E.dividerTheme, z = h.jqmData("splittheme"), r = h.jqmData("spliticon"), l = h.jqmData("icon"), B = this._getChildrenByTagName(h[0], "li", "LI"), A = !!e.nodeName(h[0], "ol"), H = !e.support.cssPseudoElement, p = h.attr("start"), x = {}, I, i, w, J, v, n, u, m, F, j, G, s, L, q; if (A && H) { h.find(".ui-li-dec").remove() } if (A) { if (p || p === 0) { if (!H) { m = parseInt(p, 10) - 1; h.css("counter-reset", "listnumbering " + m) } else { u = parseInt(p, 10) } } else { if (H) { u = 1 } } } if (!E.theme) { E.theme = e.mobile.getInheritedTheme(this.element, "c") } for (var t = 0, k = B.length; t < k; t++) { I = B.eq(t); i = "ui-li"; if (y || !I.hasClass("ui-li")) { w = I.jqmData("theme") || E.theme; J = this._getChildrenByTagName(I[0], "a", "A"); var D = (I.jqmData("role") === "list-divider"); if (J.length && !D) { G = I.jqmData("icon"); I.buttonMarkup({ wrapperEls: "div", shadow: false, corners: false, iconpos: "left", icon: J.length > 1 || G === false ? false : G || l || E.icon, theme: w }); if ((G !== false) && (J.length === 1)) { I.addClass("ui-li-has-arrow") } J.first().removeClass("ui-link").addClass("ui-link-inherit"); if (J.length > 1) { i += " ui-li-has-alt"; v = J.last(); n = z || v.jqmData("theme") || E.splitTheme; q = v.jqmData("icon"); v.appendTo(I).attr("title", e.trim(v.getEncodedText())).addClass("ui-li-link-alt").empty().buttonMarkup({ shadow: false, corners: false, theme: w, icon: false, iconpos: "notext" }).find(".ui-btn-inner").append(e(a.createElement("span")).buttonMarkup({ shadow: true, corners: true, theme: n, iconpos: "notext", icon: q || G || r || E.splitIcon })) } } else { if (D) { i += " ui-li-divider ui-bar-" + (I.jqmData("theme") || K); I.attr("role", "heading"); if (A) { if (p || p === 0) { if (!H) { F = parseInt(p, 10) - 1; I.css("counter-reset", "listnumbering " + F) } else { u = parseInt(p, 10) } } else { if (H) { u = 1 } } } } else { i += " ui-li-static ui-btn-up-" + w } } } if (A && H && i.indexOf("ui-li-divider") < 0) { j = i.indexOf("ui-li-static") > 0 ? I : I.find(".ui-link-inherit"); j.addClass("ui-li-jsnumbering").prepend("<span class='ui-li-dec'>" + (u++) + ". </span>") } if (!x[i]) { x[i] = [] } x[i].push(I[0]) } for (i in x) { e(x[i]).addClass(i).children(".ui-btn-inner").addClass(i) } h.find("h1, h2, h3, h4, h5, h6").addClass("ui-li-heading").end().find("p, dl").addClass("ui-li-desc").end().find(".ui-li-aside").each(function () { var o = e(this); o.prependTo(o.parent()) }).end().find(".ui-li-count").each(function () { e(this).closest("li").addClass("ui-li-has-count") }).addClass("ui-btn-up-" + (h.jqmData("counttheme") || this.options.countTheme) + " ui-btn-corner-all"); this._addThumbClasses(B); this._addThumbClasses(h.find(".ui-link-inherit")); this._addFirstLastClasses(B, this._getVisibles(B, y), y); this._trigger("afterrefresh") }, _idStringEscape: function (h) { return h.replace(/[^a-zA-Z0-9]/g, "-") }, _createSubPages: function () { var q = this.element, r = q.closest(".ui-page"), i = r.jqmData("url"), l = i || r[0][e.expando], j = q.attr("id"), k = this.options, m = "data-" + e.mobile.ns, s = this, p = r.find(":jqmData(role='footer')").jqmData("id"), h; if (typeof f[l] === "undefined") { f[l] = -1 } j = j || ++f[l]; e(q.find("li>ul, li>ol").toArray().reverse()).each(function (y) { var D = this, A = e(this), z = A.attr("id") || j + "-" + y, C = A.parent(), v = e(A.prevAll().toArray().reverse()), E = v.length ? v : e("<span>" + e.trim(C.contents()[0].nodeValue) + "</span>"), B = E.first().getEncodedText(), o = (i || "") + "&" + e.mobile.subPageUrlKey + "=" + z, x = A.jqmData("theme") || k.theme, t = A.jqmData("counttheme") || q.jqmData("counttheme") || k.countTheme, u, w; h = true; u = A.detach().wrap("<div " + m + "role='page' " + m + "url='" + o + "' " + m + "theme='" + x + "' " + m + "count-theme='" + t + "'><div " + m + "role='content'></div></div>").parent().before("<div " + m + "role='header' " + m + "theme='" + k.headerTheme + "'><div class='ui-title'>" + B + "</div></div>").after(p ? e("<div " + m + "role='footer' " + m + "id='" + p + "'>") : "").parent().appendTo(e.mobile.pageContainer); u.page(); w = C.find("a:first"); if (!w.length) { w = e("<a/>").html(E || B).prependTo(C.empty()) } w.attr("href", "#" + o) }).listview(); if (h && r.is(":jqmData(external-page='true')") && r.data("mobile-page").options.domCache === false) { var n = function (w, v) { var o = v.nextPage, t, u = new e.Event("pageremove"); if (v.nextPage) { t = o.jqmData("url"); if (t.indexOf(i + "&" + e.mobile.subPageUrlKey) !== 0) { s.childPages().remove(); r.trigger(u); if (!u.isDefaultPrevented()) { r.removeWithDependents() } } } }; r.unbind("pagehide.remove").bind("pagehide.remove", n) } }, childPages: function () { var h = this.parentPage.jqmData("url"); return e(":jqmData(url^='" + h + "&" + e.mobile.subPageUrlKey + "')") } }); e.widget("mobile.listview", e.mobile.listview, e.mobile.behaviors.addFirstLastClasses); e.mobile.document.bind("pagecreate create", function (h) { e.mobile.listview.prototype.enhanceWithin(h.target) }) })(c); (function (e, f) { e.mobile.listview.prototype.options.autodividers = false; e.mobile.listview.prototype.options.autodividersSelector = function (g) { var h = e.trim(g.text()) || null; if (!h) { return null } h = h.slice(0, 1).toUpperCase(); return h }; e.mobile.document.delegate("ul,ol", "listviewcreate", function () { var j = e(this), i = j.data("mobile-listview"); if (!i || !i.options.autodividers) { return } var h = function () { j.find("li:jqmData(role='list-divider')").remove(); var m = j.find("li"), l = null, k, p; for (var n = 0; n < m.length; n++) { k = m[n]; p = i.options.autodividersSelector(e(k)); if (p && l !== p) { var o = a.createElement("li"); o.appendChild(a.createTextNode(p)); o.setAttribute("data-" + e.mobile.ns + "role", "list-divider"); k.parentNode.insertBefore(o, k) } l = p } }; var g = function () { j.unbind("listviewafterrefresh", g); h(); i.refresh(); j.bind("listviewafterrefresh", g) }; g() }) })(c); (function (e, f) { e.widget("mobile.checkboxradio", e.mobile.widget, { options: { theme: null, mini: false, initSelector: "input[type='checkbox'],input[type='radio']" }, _create: function () { var u = this, q = this.element, j = this.options, m = function (o, v) { return o.jqmData(v) || o.closest("form, fieldset").jqmData(v) }, l = e(q).closest("label"), p = l.length ? l : e(q).closest("form, fieldset, :jqmData(role='page'), :jqmData(role='dialog')").find("label").filter("[for='" + q[0].id + "']").first(), s = q[0].type, k = m(q, "mini") || j.mini, t = s + "-on", r = s + "-off", n = m(q, "iconpos"), i = "ui-" + t, h = "ui-" + r; if (s !== "checkbox" && s !== "radio") { return } e.extend(this, { label: p, inputtype: s, checkedClass: i, uncheckedClass: h, checkedicon: t, uncheckedicon: r }); if (!j.theme) { j.theme = e.mobile.getInheritedTheme(this.element, "c") } p.buttonMarkup({ theme: j.theme, icon: r, shadow: false, mini: k, iconpos: n }); var g = a.createElement("div"); g.className = "ui-" + s; q.add(p).wrapAll(g); p.bind({ vmouseover: function (o) { if (e(this).parent().is(".ui-disabled")) { o.stopPropagation() } }, vclick: function (o) { if (q.is(":disabled")) { o.preventDefault(); return } u._cacheVals(); q.prop("checked", s === "radio" && true || !q.prop("checked")); q.triggerHandler("click"); u._getInputSet().not(q).prop("checked", false); u._updateAll(); return false } }); q.bind({ vmousedown: function () { u._cacheVals() }, vclick: function () { var o = e(this); if (o.is(":checked")) { o.prop("checked", true); u._getInputSet().not(o).prop("checked", false) } else { o.prop("checked", false) } u._updateAll() }, focus: function () { p.addClass(e.mobile.focusClass) }, blur: function () { p.removeClass(e.mobile.focusClass) } }); if (this._handleFormReset) { this._handleFormReset() } this.refresh() }, _cacheVals: function () { this._getInputSet().each(function () { e(this).jqmData("cacheVal", this.checked) }) }, _getInputSet: function () { if (this.inputtype === "checkbox") { return this.element } return this.element.closest("form, :jqmData(role='page'), :jqmData(role='dialog')").find("input[name='" + this.element[0].name + "'][type='" + this.inputtype + "']") }, _updateAll: function () { var g = this; this._getInputSet().each(function () { var h = e(this); if (this.checked || g.inputtype === "checkbox") { h.trigger("change") } }).checkboxradio("refresh") }, _reset: function () { this.refresh() }, refresh: function () { var g = this.element[0], j = " " + e.mobile.activeBtnClass, i = this.checkedClass + (this.element.parents(".ui-controlgroup-horizontal").length ? j : ""), h = this.label; if (g.checked) { h.removeClass(this.uncheckedClass + j).addClass(i).buttonMarkup({ icon: this.checkedicon }) } else { h.removeClass(i).addClass(this.uncheckedClass).buttonMarkup({ icon: this.uncheckedicon }) } if (g.disabled) { this.disable() } else { this.enable() } }, disable: function () { this.element.prop("disabled", true).parent().addClass("ui-disabled") }, enable: function () { this.element.prop("disabled", false).parent().removeClass("ui-disabled") } }); e.widget("mobile.checkboxradio", e.mobile.checkboxradio, e.mobile.behaviors.formReset); e.mobile.document.bind("pagecreate create", function (g) { e.mobile.checkboxradio.prototype.enhanceWithin(g.target, true) }) })(c); (function (e, f) { e.widget("mobile.button", e.mobile.widget, { options: { theme: null, icon: null, iconpos: null, corners: true, shadow: true, iconshadow: true, inline: null, mini: null, initSelector: "button, [type='button'], [type='submit'], [type='reset']" }, _create: function () { var h = this.element, j, k = (function (n) { var m, l = {}; for (m in n) { if (n[m] !== null && m !== "initSelector") { l[m] = n[m] } } return l })(this.options), g = "", i; if (h[0].tagName === "A") { if (!h.hasClass("ui-btn")) { h.buttonMarkup() } return } if (!this.options.theme) { this.options.theme = e.mobile.getInheritedTheme(this.element, "c") } if (!!~h[0].className.indexOf("ui-btn-right")) { g = "ui-btn-right" } if (!!~h[0].className.indexOf("ui-btn-left")) { g = "ui-btn-left" } if (h.attr("type") === "submit" || h.attr("type") === "reset") { g ? g += " ui-submit" : g = "ui-submit" } e("label[for='" + h.attr("id") + "']").addClass("ui-submit"); this.button = e("<div></div>")[h.html() ? "html" : "text"](h.html() || h.val()).insertBefore(h).buttonMarkup(k).addClass(g).append(h.addClass("ui-btn-hidden")); j = this.button; h.bind({ focus: function () { j.addClass(e.mobile.focusClass) }, blur: function () { j.removeClass(e.mobile.focusClass) } }); this.refresh() }, _setOption: function (g, h) { var i = {}; i[g] = h; if (g !== "initSelector") { this.button.buttonMarkup(i); this.element.attr("data-" + (e.mobile.ns || "") + (g.replace(/([A-Z])/, "-$1").toLowerCase()), h) } this._super("_setOption", g, h) }, enable: function () { this.element.attr("disabled", false); this.button.removeClass("ui-disabled").attr("aria-disabled", false); return this._setOption("disabled", false) }, disable: function () { this.element.attr("disabled", true); this.button.addClass("ui-disabled").attr("aria-disabled", true); return this._setOption("disabled", true) }, refresh: function () { var g = this.element; if (g.prop("disabled")) { this.disable() } else { this.enable() } e(this.button.data("buttonElements").text)[g.html() ? "html" : "text"](g.html() || g.val()) } }); e.mobile.document.bind("pagecreate create", function (g) { e.mobile.button.prototype.enhanceWithin(g.target, true) }) })(c); (function (e, f) { e.widget("mobile.controlgroup", e.mobile.widget, { options: { shadow: false, corners: true, excludeInvisible: true, type: "vertical", mini: false, initSelector: ":jqmData(role='controlgroup')" }, _create: function () { var h = this.element, i = { inner: e("<div class='ui-controlgroup-controls'></div>"), legend: e("<div role='heading' class='ui-controlgroup-label'></div>") }, j = h.children("legend"), g = this; h.wrapInner(i.inner); if (j.length) { i.legend.append(j).insertBefore(h.children(0)) } h.addClass("ui-corner-all ui-controlgroup"); e.extend(this, { _initialRefresh: true }); e.each(this.options, function (k, l) { g.options[k] = f; g._setOption(k, l, true) }) }, _init: function () { this.refresh() }, _setOption: function (g, h) { var i = "_set" + g.charAt(0).toUpperCase() + g.slice(1); if (this[i] !== f) { this[i](h) } this._super(g, h); this.element.attr("data-" + (e.mobile.ns || "") + (g.replace(/([A-Z])/, "-$1").toLowerCase()), h) }, _setType: function (g) { this.element.removeClass("ui-controlgroup-horizontal ui-controlgroup-vertical").addClass("ui-controlgroup-" + g); this.refresh() }, _setCorners: function (g) { this.element.toggleClass("ui-corner-all", g) }, _setShadow: function (g) { this.element.toggleClass("ui-shadow", g) }, _setMini: function (g) { this.element.toggleClass("ui-mini", g) }, container: function () { return this.element.children(".ui-controlgroup-controls") }, refresh: function () { var h = this.element.find(".ui-btn").not(".ui-slider-handle"), g = this._initialRefresh; if (e.mobile.checkboxradio) { this.element.find(":mobile-checkboxradio").checkboxradio("refresh") } this._addFirstLastClasses(h, this.options.excludeInvisible ? this._getVisibles(h, g) : h, g); this._initialRefresh = false } }); e.widget("mobile.controlgroup", e.mobile.controlgroup, e.mobile.behaviors.addFirstLastClasses); e(function () { e.mobile.document.bind("pagecreate create", function (g) { e.mobile.controlgroup.prototype.enhanceWithin(g.target, true) }) }) })(c); (function (e, f) { e(a).bind("pagecreate create", function (g) { e(g.target).find("a").jqmEnhanceable().not(".ui-btn, .ui-link-inherit, :jqmData(role='none'), :jqmData(role='nojs')").addClass("ui-link") }) })(c); (function (g, h) { function f(j, l, m, k) { var i = k; if (j < l) { i = m + (j - l) / 2 } else { i = Math.min(Math.max(m, k - l / 2), m + j - l) } return i } function e() { var i = g.mobile.window; return { x: i.scrollLeft(), y: i.scrollTop(), cx: (b.innerWidth || i.width()), cy: (b.innerHeight || i.height()) } } g.widget("mobile.popup", g.mobile.widget, { options: { theme: null, overlayTheme: null, shadow: true, corners: true, transition: "none", positionTo: "origin", tolerance: null, initSelector: ":jqmData(role='popup')", closeLinkSelector: "a:jqmData(rel='back')", closeLinkEvents: "click.popup", navigateEvents: "navigate.popup", closeEvents: "navigate.popup pagebeforechange.popup", dismissible: true, history: !g.mobile.browser.oldIE }, _eatEventAndClose: function (i) { i.preventDefault(); i.stopImmediatePropagation(); if (this.options.dismissible) { this.close() } return false }, _resizeScreen: function () { var i = this._ui.container.outerHeight(true); this._ui.screen.removeAttr("style"); if (i > this._ui.screen.height()) { this._ui.screen.height(i) } }, _handleWindowKeyUp: function (i) { if (this._isOpen && i.keyCode === g.mobile.keyCode.ESCAPE) { return this._eatEventAndClose(i) } }, _expectResizeEvent: function () { var i = e(); if (this._resizeData) { if (i.x === this._resizeData.winCoords.x && i.y === this._resizeData.winCoords.y && i.cx === this._resizeData.winCoords.cx && i.cy === this._resizeData.winCoords.cy) { return false } else { clearTimeout(this._resizeData.timeoutId) } } this._resizeData = { timeoutId: setTimeout(g.proxy(this, "_resizeTimeout"), 200), winCoords: i }; return true }, _resizeTimeout: function () { if (this._isOpen) { if (!this._expectResizeEvent()) { if (this._ui.container.hasClass("ui-popup-hidden")) { this._ui.container.removeClass("ui-popup-hidden"); this.reposition({ positionTo: "window" }); this._ignoreResizeEvents() } this._resizeScreen(); this._resizeData = null; this._orientationchangeInProgress = false } } else { this._resizeData = null; this._orientationchangeInProgress = false } }, _ignoreResizeEvents: function () { var i = this; if (this._ignoreResizeTo) { clearTimeout(this._ignoreResizeTo) } this._ignoreResizeTo = setTimeout(function () { i._ignoreResizeTo = 0 }, 1000) }, _handleWindowResize: function (i) { if (this._isOpen && this._ignoreResizeTo === 0) { if ((this._expectResizeEvent() || this._orientationchangeInProgress) && !this._ui.container.hasClass("ui-popup-hidden")) { this._ui.container.addClass("ui-popup-hidden").removeAttr("style") } } }, _handleWindowOrientationchange: function (i) { if (!this._orientationchangeInProgress && this._isOpen && this._ignoreResizeTo === 0) { this._expectResizeEvent(); this._orientationchangeInProgress = true } }, _handleDocumentFocusIn: function (k) { var l = k.target, i, j = this._ui; if (!this._isOpen) { return } if (l !== j.container[0]) { i = g(k.target); if (0 === i.parents().filter(j.container[0]).length) { g(a.activeElement).one("focus", function (m) { i.blur() }); j.focusElement.focus(); k.preventDefault(); k.stopImmediatePropagation(); return false } else { if (j.focusElement[0] === j.container[0]) { j.focusElement = i } } } else { if (j.focusElement && j.focusElement[0] !== j.container[0]) { j.container.blur(); j.focusElement.focus() } } this._ignoreResizeEvents() }, _create: function () { var l = { screen: g("<div class='ui-screen-hidden ui-popup-screen'></div>"), placeholder: g("<div style='display: none;'><!-- placeholder --></div>"), container: g("<div class='ui-popup-container ui-popup-hidden'></div>") }, k = this.element.closest(".ui-page"), j = this.element.attr("id"), i = this; this.options.history = this.options.history && g.mobile.ajaxEnabled && g.mobile.hashListeningEnabled; if (k.length === 0) { k = g("body") } this.options.container = this.options.container || g.mobile.pageContainer; k.append(l.screen); l.container.insertAfter(l.screen); l.placeholder.insertAfter(this.element); if (j) { l.screen.attr("id", j + "-screen"); l.container.attr("id", j + "-popup"); l.placeholder.html("<!-- placeholder for " + j + " -->") } l.container.append(this.element); l.focusElement = l.container; this.element.addClass("ui-popup"); g.extend(this, { _scrollTop: 0, _page: k, _ui: l, _fallbackTransition: "", _currentTransition: false, _prereqs: null, _isOpen: false, _tolerance: null, _resizeData: null, _ignoreResizeTo: 0, _orientationchangeInProgress: false }); g.each(this.options, function (m, n) { i.options[m] = h; i._setOption(m, n, true) }); l.screen.bind("vclick", g.proxy(this, "_eatEventAndClose")); this._on(g.mobile.window, { orientationchange: g.proxy(this, "_handleWindowOrientationchange"), resize: g.proxy(this, "_handleWindowResize"), keyup: g.proxy(this, "_handleWindowKeyUp") }); this._on(g.mobile.document, { focusin: g.proxy(this, "_handleDocumentFocusIn") }) }, _applyTheme: function (p, o, m) { var j = (p.attr("class") || "").split(" "), n = true, k = null, l, i = String(o); while (j.length > 0) { k = j.pop(); l = (new RegExp("^ui-" + m + "-([a-z])$")).exec(k); if (l && l.length > 1) { k = l[1]; break } else { k = null } } if (o !== k) { p.removeClass("ui-" + m + "-" + k); if (!(o === null || o === "none")) { p.addClass("ui-" + m + "-" + i) } } }, _setTheme: function (i) { this._applyTheme(this.element, i, "body") }, _setOverlayTheme: function (i) { this._applyTheme(this._ui.screen, i, "overlay"); if (this._isOpen) { this._ui.screen.addClass("in") } }, _setShadow: function (i) { this.element.toggleClass("ui-overlay-shadow", i) }, _setCorners: function (i) { this.element.toggleClass("ui-corner-all", i) }, _applyTransition: function (i) { this._ui.container.removeClass(this._fallbackTransition); if (i && i !== "none") { this._fallbackTransition = g.mobile._maybeDegradeTransition(i); if (this._fallbackTransition === "none") { this._fallbackTransition = "" } this._ui.container.addClass(this._fallbackTransition) } }, _setTransition: function (i) { if (!this._currentTransition) { this._applyTransition(i) } }, _setTolerance: function (k) { var i = { t: 30, r: 15, b: 30, l: 15 }; if (k !== h) { var j = String(k).split(","); g.each(j, function (l, m) { j[l] = parseInt(m, 10) }); switch (j.length) { case 1: if (!isNaN(j[0])) { i.t = i.r = i.b = i.l = j[0] } break; case 2: if (!isNaN(j[0])) { i.t = i.b = j[0] } if (!isNaN(j[1])) { i.l = i.r = j[1] } break; case 4: if (!isNaN(j[0])) { i.t = j[0] } if (!isNaN(j[1])) { i.r = j[1] } if (!isNaN(j[2])) { i.b = j[2] } if (!isNaN(j[3])) { i.l = j[3] } break; default: break } } this._tolerance = i }, _setOption: function (j, k) { var i, l = "_set" + j.charAt(0).toUpperCase() + j.slice(1); if (this[l] !== h) { this[l](k) } i = ["initSelector", "closeLinkSelector", "closeLinkEvents", "navigateEvents", "closeEvents", "history", "container"]; g.mobile.widget.prototype._setOption.apply(this, arguments); if (g.inArray(j, i) === -1) { this.element.attr("data-" + (g.mobile.ns || "") + (j.replace(/([A-Z])/, "-$1").toLowerCase()), k) } }, _placementCoords: function (m) { var o = e(), n = { x: this._tolerance.l, y: o.y + this._tolerance.t, cx: o.cx - this._tolerance.l - this._tolerance.r, cy: o.cy - this._tolerance.t - this._tolerance.b }, k, j; this._ui.container.css("max-width", n.cx); k = { cx: this._ui.container.outerWidth(true), cy: this._ui.container.outerHeight(true) }; j = { x: f(n.cx, k.cx, n.x, m.x), y: f(n.cy, k.cy, n.y, m.y) }; j.y = Math.max(0, j.y); var p = a.documentElement, l = a.body, i = Math.max(p.clientHeight, l.scrollHeight, l.offsetHeight, p.scrollHeight, p.offsetHeight); j.y -= Math.min(j.y, Math.max(0, j.y + k.cy - i)); return { left: j.x, top: j.y } }, _createPrereqs: function (i, m, k) { var j = this, l; l = { screen: g.Deferred(), container: g.Deferred() }; l.screen.then(function () { if (l === j._prereqs) { i() } }); l.container.then(function () { if (l === j._prereqs) { m() } }); g.when(l.screen, l.container).done(function () { if (l === j._prereqs) { j._prereqs = null; k() } }); j._prereqs = l }, _animate: function (i) { this._ui.screen.removeClass(i.classToRemove).addClass(i.screenClassToAdd); i.prereqs.screen.resolve(); if (i.transition && i.transition !== "none") { if (i.applyTransition) { this._applyTransition(i.transition) } if (this._fallbackTransition) { this._ui.container.animationComplete(g.proxy(i.prereqs.container, "resolve")).addClass(i.containerClassToAdd).removeClass(i.classToRemove); return } } this._ui.container.removeClass(i.classToRemove); i.prereqs.container.resolve() }, _desiredCoords: function (n) { var q = null, m, l = e(), i = n.x, p = n.y, j = n.positionTo; if (j && j !== "origin") { if (j === "window") { i = l.cx / 2 + l.x; p = l.cy / 2 + l.y } else { try { q = g(j) } catch (k) { q = null } if (q) { q.filter(":visible"); if (q.length === 0) { q = null } } } } if (q) { m = q.offset(); i = m.left + q.outerWidth() / 2; p = m.top + q.outerHeight() / 2 } if (g.type(i) !== "number" || isNaN(i)) { i = l.cx / 2 + l.x } if (g.type(p) !== "number" || isNaN(p)) { p = l.cy / 2 + l.y } return { x: i, y: p } }, _reposition: function (i) { i = { x: i.x, y: i.y, positionTo: i.positionTo }; this._trigger("beforeposition", i); this._ui.container.offset(this._placementCoords(this._desiredCoords(i))) }, reposition: function (i) { if (this._isOpen) { this._reposition(i) } }, _openPrereqsComplete: function () { this._ui.container.addClass("ui-popup-active"); this._isOpen = true; this._resizeScreen(); this._ui.container.attr("tabindex", "0").focus(); this._ignoreResizeEvents(); this._trigger("afteropen") }, _open: function (i) { var k = g.extend({}, this.options, i), j = (function () { var m = b, o = navigator.userAgent, n = o.match(/AppleWebKit\/([0-9\.]+)/), r = !!n && n[1], p = o.match(/Android (\d+(?:\.\d+))/), q = !!p && p[1], l = o.indexOf("Chrome") > -1; if (p !== null && q === "4.0" && r && r > 534.13 && !l) { return true } return false }()); this._createPrereqs(g.noop, g.noop, g.proxy(this, "_openPrereqsComplete")); this._currentTransition = k.transition; this._applyTransition(k.transition); if (!this.options.theme) { this._setTheme(this._page.jqmData("theme") || g.mobile.getInheritedTheme(this._page, "c")) } this._ui.screen.removeClass("ui-screen-hidden"); this._ui.container.removeClass("ui-popup-hidden"); this._reposition(k); if (this.options.overlayTheme && j) { this.element.closest(".ui-page").addClass("ui-popup-open") } this._animate({ additionalCondition: true, transition: k.transition, classToRemove: "", screenClassToAdd: "in", containerClassToAdd: "in", applyTransition: false, prereqs: this._prereqs }) }, _closePrereqScreen: function () { this._ui.screen.removeClass("out").addClass("ui-screen-hidden") }, _closePrereqContainer: function () { this._ui.container.removeClass("reverse out").addClass("ui-popup-hidden").removeAttr("style") }, _closePrereqsDone: function () { var i = this.options; this._ui.container.removeAttr("tabindex"); g.mobile.popup.active = h; this._trigger("afterclose") }, _close: function (i) { this._ui.container.removeClass("ui-popup-active"); this._page.removeClass("ui-popup-open"); this._isOpen = false; this._createPrereqs(g.proxy(this, "_closePrereqScreen"), g.proxy(this, "_closePrereqContainer"), g.proxy(this, "_closePrereqsDone")); this._animate({ additionalCondition: this._ui.screen.hasClass("in"), transition: (i ? "none" : (this._currentTransition)), classToRemove: "in", screenClassToAdd: "out", containerClassToAdd: "reverse out", applyTransition: true, prereqs: this._prereqs }) }, _unenhance: function () { this._setTheme("none"); this.element.detach().insertAfter(this._ui.placeholder).removeClass("ui-popup ui-overlay-shadow ui-corner-all"); this._ui.screen.remove(); this._ui.container.remove(); this._ui.placeholder.remove() }, _destroy: function () { if (g.mobile.popup.active === this) { this.element.one("popupafterclose", g.proxy(this, "_unenhance")); this.close() } else { this._unenhance() } }, _closePopup: function (l, k) { var j, n, m = this.options, i = false; b.scrollTo(0, this._scrollTop); if (l && l.type === "pagebeforechange" && k) { if (typeof k.toPage === "string") { j = k.toPage } else { j = k.toPage.jqmData("url") } j = g.mobile.path.parseUrl(j); n = j.pathname + j.search + j.hash; if (this._myUrl !== g.mobile.path.makeUrlAbsolute(n)) { i = true } else { l.preventDefault() } } m.container.unbind(m.closeEvents); this.element.undelegate(m.closeLinkSelector, m.closeLinkEvents); this._close(i) }, _bindContainerClose: function () { this.options.container.one(this.options.closeEvents, g.proxy(this, "_closePopup")) }, open: function (p) { var o = this, j = this.options, k, n, l, i, q, m; if (g.mobile.popup.active) { return } g.mobile.popup.active = this; this._scrollTop = g.mobile.window.scrollTop(); if (!(j.history)) { o._open(p); o._bindContainerClose(); o.element.delegate(j.closeLinkSelector, j.closeLinkEvents, function (r) { o.close(); r.preventDefault() }); return } m = g.mobile.urlHistory; n = g.mobile.dialogHashKey; l = g.mobile.activePage; i = l.is(".ui-dialog"); this._myUrl = k = m.getActive().url; q = (k.indexOf(n) > -1) && !i && (m.activeIndex > 0); if (q) { o._open(p); o._bindContainerClose(); return } if (k.indexOf(n) === -1 && !i) { k = k + (k.indexOf("#") > -1 ? n : "#" + n) } else { k = g.mobile.path.parseLocation().hash + n } if (m.activeIndex === 0 && k === m.initialDst) { k += n } g(b).one("beforenavigate", function (r) { r.preventDefault(); o._open(p); o._bindContainerClose() }); this.urlAltered = true; g.mobile.navigate(k, { role: "dialog" }) }, close: function () { if (g.mobile.popup.active !== this) { return } this._scrollTop = g.mobile.window.scrollTop(); if (this.options.history && this.urlAltered) { g.mobile.back(); this.urlAltered = false } else { this._closePopup() } } }); g.mobile.popup.handleLink = function (j) { var l = j.closest(":jqmData(role='page')"), k = ((l.length === 0) ? g("body") : l), i = g(g.mobile.path.parseUrl(j.attr("href")).hash, k[0]), m; if (i.data("mobile-popup")) { m = j.offset(); i.popup("open", { x: m.left + j.outerWidth() / 2, y: m.top + j.outerHeight() / 2, transition: j.jqmData("transition"), positionTo: j.jqmData("position-to") }) } setTimeout(function () { var n = j.parent().parent(); if (n.hasClass("ui-li")) { j = n.parent() } j.removeClass(g.mobile.activeBtnClass) }, 300) }; g.mobile.document.bind("pagebeforechange", function (j, i) { if (i.options.role === "popup") { g.mobile.popup.handleLink(i.options.link); j.preventDefault() } }); g.mobile.document.bind("pagecreate create", function (i) { g.mobile.popup.prototype.enhanceWithin(i.target, true) }) })(c); (function (e, f) { e.widget("mobile.panel", e.mobile.widget, { options: { classes: { panel: "ui-panel", panelOpen: "ui-panel-open", panelClosed: "ui-panel-closed", panelFixed: "ui-panel-fixed", panelInner: "ui-panel-inner", modal: "ui-panel-dismiss", modalOpen: "ui-panel-dismiss-open", pagePanel: "ui-page-panel", pagePanelOpen: "ui-page-panel-open", contentWrap: "ui-panel-content-wrap", contentWrapOpen: "ui-panel-content-wrap-open", contentWrapClosed: "ui-panel-content-wrap-closed", contentFixedToolbar: "ui-panel-content-fixed-toolbar", contentFixedToolbarOpen: "ui-panel-content-fixed-toolbar-open", contentFixedToolbarClosed: "ui-panel-content-fixed-toolbar-closed", animate: "ui-panel-animate" }, animate: true, theme: "c", position: "right", dismissible: true, display: "reveal", initSelector: ":jqmData(role='panel')", swipeClose: true, positionFixed: false }, _panelID: null, _closeLink: null, _page: null, _modal: null, _pannelInner: null, _wrapper: null, _fixedToolbar: null, _create: function () { var h = this, j = h.element, l = j.closest(":jqmData(role='page')"), i = function () { var o = e.data(l[0], "mobilePage").options.theme, n = "ui-body-" + o; return n }, g = function () { var n = j.find("." + h.options.classes.panelInner); if (n.length === 0) { n = j.children().wrapAll('<div class="' + h.options.classes.panelInner + '" />').parent() } return n }, m = function () { var n = l.find("." + h.options.classes.contentWrap); if (n.length === 0) { n = l.children(".ui-header:not(:jqmData(position='fixed')), .ui-content:not(:jqmData(role='popup')), .ui-footer:not(:jqmData(position='fixed'))").wrapAll('<div class="' + h.options.classes.contentWrap + " " + i() + '" />').parent(); if (e.support.cssTransform3d && !!h.options.animate) { n.addClass(h.options.classes.animate) } } return n }, k = function () { var n = l.find("." + h.options.classes.contentFixedToolbar); if (n.length === 0) { n = l.find(".ui-header:jqmData(position='fixed'), .ui-footer:jqmData(position='fixed')").addClass(h.options.classes.contentFixedToolbar); if (e.support.cssTransform3d && !!h.options.animate) { n.addClass(h.options.classes.animate) } } return n }; e.extend(this, { _panelID: j.attr("id"), _closeLink: j.find(":jqmData(rel='close')"), _page: j.closest(":jqmData(role='page')"), _pageTheme: i(), _pannelInner: g(), _wrapper: m(), _fixedToolbar: k() }); h._addPanelClasses(); h._wrapper.addClass(this.options.classes.contentWrapClosed); h._fixedToolbar.addClass(this.options.classes.contentFixedToolbarClosed); h._page.addClass(h.options.classes.pagePanel); if (e.support.cssTransform3d && !!h.options.animate) { this.element.addClass(h.options.classes.animate) } h._bindUpdateLayout(); h._bindCloseEvents(); h._bindLinkListeners(); h._bindPageEvents(); if (!!h.options.dismissible) { h._createModal() } h._bindSwipeEvents() }, _createModal: function (h) { var g = this; g._modal = e("<div class='" + g.options.classes.modal + "' data-panelid='" + g._panelID + "'></div>").on("mousedown", function () { g.close() }).appendTo(this._page) }, _getPosDisplayClasses: function (g) { return g + "-position-" + this.options.position + " " + g + "-display-" + this.options.display }, _getPanelClasses: function () { var g = this.options.classes.panel + " " + this._getPosDisplayClasses(this.options.classes.panel) + " " + this.options.classes.panelClosed; if (this.options.theme) { g += " ui-body-" + this.options.theme } if (!!this.options.positionFixed) { g += " " + this.options.classes.panelFixed } return g }, _addPanelClasses: function () { this.element.addClass(this._getPanelClasses()) }, _bindCloseEvents: function () { var g = this; g._closeLink.on("click.panel", function (h) { h.preventDefault(); g.close(); return false }); g.element.on("click.panel", "a:jqmData(ajax='false')", function (h) { g.close() }) }, _positionPanel: function () { var g = this, i = g._pannelInner.outerHeight(), h = i > e.mobile.getScreenHeight(); if (h || !g.options.positionFixed) { if (h) { g._unfixPanel(); e.mobile.resetActivePageHeight(i) } g._scrollIntoView(i) } else { g._fixPanel() } }, _scrollIntoView: function (g) { if (g < e(b).scrollTop()) { b.scrollTo(0, 0) } }, _bindFixListener: function () { this._on(e(b), { throttledresize: "_positionPanel" }) }, _unbindFixListener: function () { this._off(e(b), "throttledresize") }, _unfixPanel: function () { if (!!this.options.positionFixed && e.support.fixedPosition) { this.element.removeClass(this.options.classes.panelFixed) } }, _fixPanel: function () { if (!!this.options.positionFixed && e.support.fixedPosition) { this.element.addClass(this.options.classes.panelFixed) } }, _bindUpdateLayout: function () { var g = this; g.element.on("updatelayout", function (h) { if (g._open) { g._positionPanel() } }) }, _bindLinkListeners: function () { var g = this; g._page.on("click.panel", "a", function (i) { if (this.href.split("#")[1] === g._panelID && g._panelID !== f) { i.preventDefault(); var h = e(this); if (!h.hasClass("ui-link")) { h.addClass(e.mobile.activeBtnClass); g.element.one("panelopen panelclose", function () { h.removeClass(e.mobile.activeBtnClass) }) } g.toggle(); return false } }) }, _bindSwipeEvents: function () { var g = this, h = g._modal ? g.element.add(g._modal) : g.element; if (!!g.options.swipeClose) { if (g.options.position === "right") { h.on("swiperight.panel", function (i) { g.close() }) } else { h.on("swipeleft.panel", function (i) { g.close() }) } } }, _bindPageEvents: function () { var g = this; g._page.on("panelbeforeopen", function (h) { if (g._open && h.target !== g.element[0]) { g.close() } }).on("pagehide", function (h) { if (g._open) { g.close(true) } }).on("keyup.panel", function (h) { if (h.keyCode === 27 && g._open) { g.close() } }) }, _open: false, _contentWrapOpenClasses: null, _fixedToolbarOpenClasses: null, _modalOpenClasses: null, open: function (j) { if (!this._open) { var i = this, k = i.options, h = function () { i._page.off("panelclose"); i._page.jqmData("panel", "open"); if (!j && e.support.cssTransform3d && !!k.animate) { i.element.add(i._wrapper).on(i._transitionEndEvents, g) } else { setTimeout(g, 0) } if (i.options.theme && i.options.display !== "overlay") { i._page.removeClass(i._pageTheme).addClass("ui-body-" + i.options.theme) } i.element.removeClass(k.classes.panelClosed).addClass(k.classes.panelOpen); i._contentWrapOpenClasses = i._getPosDisplayClasses(k.classes.contentWrap); i._wrapper.removeClass(k.classes.contentWrapClosed).addClass(i._contentWrapOpenClasses + " " + k.classes.contentWrapOpen); i._fixedToolbarOpenClasses = i._getPosDisplayClasses(k.classes.contentFixedToolbar); i._fixedToolbar.removeClass(k.classes.contentFixedToolbarClosed).addClass(i._fixedToolbarOpenClasses + " " + k.classes.contentFixedToolbarOpen); i._modalOpenClasses = i._getPosDisplayClasses(k.classes.modal) + " " + k.classes.modalOpen; if (i._modal) { i._modal.addClass(i._modalOpenClasses) } }, g = function () { i.element.add(i._wrapper).off(i._transitionEndEvents, g); i._page.addClass(k.classes.pagePanelOpen); i._positionPanel(); i._bindFixListener(); i._trigger("open") }; if (this.element.closest(".ui-page-active").length < 0) { j = true } i._trigger("beforeopen"); if (i._page.jqmData("panel") === "open") { i._page.on("panelclose", function () { h() }) } else { h() } i._open = true } }, close: function (i) { if (this._open) { var k = this.options, h = this, j = function () { if (!i && e.support.cssTransform3d && !!k.animate) { h.element.add(h._wrapper).on(h._transitionEndEvents, g) } else { setTimeout(g, 0) } h._page.removeClass(k.classes.pagePanelOpen); h.element.removeClass(k.classes.panelOpen); h._wrapper.removeClass(k.classes.contentWrapOpen); h._fixedToolbar.removeClass(k.classes.contentFixedToolbarOpen); if (h._modal) { h._modal.removeClass(h._modalOpenClasses) } }, g = function () { if (h.options.theme && h.options.display !== "overlay") { h._page.removeClass("ui-body-" + h.options.theme).addClass(h._pageTheme) } h.element.add(h._wrapper).off(h._transitionEndEvents, g); h.element.addClass(k.classes.panelClosed); h._wrapper.removeClass(h._contentWrapOpenClasses).addClass(k.classes.contentWrapClosed); h._fixedToolbar.removeClass(h._fixedToolbarOpenClasses).addClass(k.classes.contentFixedToolbarClosed); h._fixPanel(); h._unbindFixListener(); e.mobile.resetActivePageHeight(); h._page.jqmRemoveData("panel"); h._trigger("close") }; if (this.element.closest(".ui-page-active").length < 0) { i = true } h._trigger("beforeclose"); j(); h._open = false } }, toggle: function (g) { this[this._open ? "close" : "open"]() }, _transitionEndEvents: "webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd", _destroy: function () { var h = this.options.classes, i = this.options.theme, g = this.element.siblings("." + h.panel).length; if (!g) { this._wrapper.children().unwrap(); this._page.find("a").unbind("panelopen panelclose"); this._page.removeClass(h.pagePanel); if (this._open) { this._page.jqmRemoveData("panel"); this._page.removeClass(h.pagePanelOpen); if (i) { this._page.removeClass("ui-body-" + i).addClass(this._pageTheme) } e.mobile.resetActivePageHeight() } } else { if (this._open) { this._wrapper.removeClass(h.contentWrapOpen); this._fixedToolbar.removeClass(h.contentFixedToolbarOpen); this._page.jqmRemoveData("panel"); this._page.removeClass(h.pagePanelOpen); if (i) { this._page.removeClass("ui-body-" + i).addClass(this._pageTheme) } } } this._pannelInner.children().unwrap(); this.element.removeClass([this._getPanelClasses(), h.panelAnimate].join(" ")).off("swiperight.panel swipeleft.panel").off("panelbeforeopen").off("panelhide").off("keyup.panel").off("updatelayout"); this._closeLink.off("click.panel"); if (this._modal) { this._modal.remove() } this.element.off(this._transitionEndEvents).removeClass([h.panelUnfixed, h.panelClosed, h.panelOpen].join(" ")) } }); e(a).bind("pagecreate create", function (g) { e.mobile.panel.prototype.enhanceWithin(g.target) }) })(c); (function (e, f) { e.widget("mobile.table", e.mobile.widget, { options: { classes: { table: "ui-table" }, initSelector: ":jqmData(role='table')" }, _create: function () { var h = this, g = this.element.find("thead tr"); this.element.addClass(this.options.classes.table); h.headers = this.element.find("tr:eq(0)").children(); h.allHeaders = h.headers.add(g.children()); g.each(function () { var i = 0; e(this).children().each(function (l) { var m = parseInt(e(this).attr("colspan"), 10), n = ":nth-child(" + (i + 1) + ")"; e(this).jqmData("colstart", i + 1); if (m) { for (var k = 0; k < m - 1; k++) { i++; n += ", :nth-child(" + (i + 1) + ")" } } e(this).jqmData("cells", h.element.find("tr").not(g.eq(0)).not(this).children(n)); i++ }) }) } }); e.mobile.document.bind("pagecreate create", function (g) { e.mobile.table.prototype.enhanceWithin(g.target) }) })(c); (function (e, f) { e.mobile.table.prototype.options.mode = "columntoggle"; e.mobile.table.prototype.options.columnBtnTheme = null; e.mobile.table.prototype.options.columnPopupTheme = null; e.mobile.table.prototype.options.columnBtnText = "Columns..."; e.mobile.table.prototype.options.classes = e.extend(e.mobile.table.prototype.options.classes, { popup: "ui-table-columntoggle-popup", columnBtn: "ui-table-columntoggle-btn", priorityPrefix: "ui-table-priority-", columnToggleTable: "ui-table-columntoggle" }); e.mobile.document.delegate(":jqmData(role='table')", "tablecreate", function () { var i = e(this), h = i.data("mobile-table"), m = h.options, k = e.mobile.ns; if (m.mode !== "columntoggle") { return } h.element.addClass(m.classes.columnToggleTable); var n = (i.attr("id") || m.classes.popup) + "-popup", g = e("<a href='#" + n + "' class='" + m.classes.columnBtn + "' data-" + k + "rel='popup' data-" + k + "mini='true'>" + m.columnBtnText + "</a>"), l = e("<div data-" + k + "role='popup' data-" + k + "role='fieldcontain' class='" + m.classes.popup + "' id='" + n + "'></div>"), j = e("<fieldset data-" + k + "role='controlgroup'></fieldset>"); h.headers.not("td").each(function () { var p = e(this).jqmData("priority"), o = e(this).add(e(this).jqmData("cells")); if (p) { o.addClass(m.classes.priorityPrefix + p); e("<label><input type='checkbox' checked />" + e(this).text() + "</label>").appendTo(j).children(0).jqmData("cells", o).checkboxradio({ theme: m.columnPopupTheme }) } }); j.appendTo(l); j.on("change", "input", function (o) { if (this.checked) { e(this).jqmData("cells").removeClass("ui-table-cell-hidden").addClass("ui-table-cell-visible") } else { e(this).jqmData("cells").removeClass("ui-table-cell-visible").addClass("ui-table-cell-hidden") } }); g.insertBefore(i).buttonMarkup({ theme: m.columnBtnTheme }); l.insertBefore(i).popup(); h.refresh = function () { j.find("input").each(function () { this.checked = e(this).jqmData("cells").eq(0).css("display") === "table-cell"; e(this).checkboxradio("refresh") }) }; e.mobile.window.on("throttledresize", h.refresh); h.refresh() }) })(c); (function (e, f) { e.mobile.table.prototype.options.mode = "reflow"; e.mobile.table.prototype.options.classes = e.extend(e.mobile.table.prototype.options.classes, { reflowTable: "ui-table-reflow", cellLabels: "ui-table-cell-label" }); e.mobile.document.delegate(":jqmData(role='table')", "tablecreate", function () { var i = e(this), h = i.data("mobile-table"), j = h.options; if (j.mode !== "reflow") { return } h.element.addClass(j.classes.reflowTable); var g = e(h.allHeaders.get().reverse()); g.each(function (m) { var k = e(this).jqmData("cells"), l = e(this).jqmData("colstart"), q = k.not(this).filter("thead th").length && " ui-table-cell-label-top", p = e(this).text(); if (p !== "") { if (q) { var o = parseInt(e(this).attr("colspan"), 10), n = ""; if (o) { n = "td:nth-child(" + o + "n + " + (l) + ")" } k.filter(n).prepend("<b class='" + j.classes.cellLabels + q + "'>" + p + "</b>") } else { k.prepend("<b class='" + j.classes.cellLabels + "'>" + p + "</b>") } } }) }) })(c); (function (g) { var h = g("meta[name=viewport]"), f = h.attr("content"), j = f + ",maximum-scale=1, user-scalable=no", i = f + ",maximum-scale=10, user-scalable=yes", e = /(user-scalable[\s]*=[\s]*no)|(maximum-scale[\s]*=[\s]*1)[$,\s]/.test(f); g.mobile.zoom = g.extend({}, { enabled: !e, locked: false, disable: function (k) { if (!e && !g.mobile.zoom.locked) { h.attr("content", j); g.mobile.zoom.enabled = false; g.mobile.zoom.locked = k || false } }, enable: function (k) { if (!e && (!g.mobile.zoom.locked || k === true)) { h.attr("content", i); g.mobile.zoom.enabled = true; g.mobile.zoom.locked = false } }, restore: function () { if (!e) { h.attr("content", f); g.mobile.zoom.enabled = true } } }) }(c)); (function (e, f) { e.widget("mobile.textinput", e.mobile.widget, { options: { theme: null, mini: false, preventFocusZoom: /iPhone|iPad|iPod/.test(navigator.platform) && navigator.userAgent.indexOf("AppleWebKit") > -1, initSelector: "input[type='text'], input[type='search'], :jqmData(type='search'), input[type='number'], :jqmData(type='number'), input[type='password'], input[type='email'], input[type='url'], input[type='tel'], textarea, input[type='time'], input[type='date'], input[type='month'], input[type='week'], input[type='datetime'], input[type='datetime-local'], input[type='color'], input:not([type]), input[type='file']", clearBtn: false, clearSearchButtonText: null, clearBtnText: "clear text", disabled: false }, _create: function () { var v = this, s = this.element, i = this.options, k = i.theme || e.mobile.getInheritedTheme(this.element, "c"), x = " ui-body-" + k, n = i.mini ? " ui-mini" : "", r = s.is("[type='search'], :jqmData(type='search')"), l, t, p = i.clearSearchButtonText || i.clearBtnText, m = s.is("textarea, :jqmData(type='range')"), w = !!i.clearBtn && !m, g = s.is("input") && !s.is(":jqmData(type='range')"); function h() { setTimeout(function () { t.toggleClass("ui-input-clear-hidden", !s.val()) }, 0) } e("label[for='" + s.attr("id") + "']").addClass("ui-input-text"); l = s.addClass("ui-input-text ui-body-" + k); if (typeof s[0].autocorrect !== "undefined" && !e.support.touchOverflow) { s[0].setAttribute("autocorrect", "off"); s[0].setAttribute("autocomplete", "off") } if (r) { l = s.wrap("<div class='ui-input-search ui-shadow-inset ui-btn-corner-all ui-btn-shadow ui-icon-searchfield" + x + n + "'></div>").parent() } else { if (g) { l = s.wrap("<div class='ui-input-text ui-shadow-inset ui-corner-all ui-btn-shadow" + x + n + "'></div>").parent() } } if (w || r) { t = e("<a href='#' class='ui-input-clear' title='" + p + "'>" + p + "</a>").bind("click", function (o) { s.val("").focus().trigger("change"); t.addClass("ui-input-clear-hidden"); o.preventDefault() }).appendTo(l).buttonMarkup({ icon: "delete", iconpos: "notext", corners: true, shadow: true, mini: i.mini }); if (!r) { l.addClass("ui-input-has-clear") } h(); s.bind("paste cut keyup input focus change blur", h) } else { if (!g && !r) { s.addClass("ui-corner-all ui-shadow-inset" + x + n) } } s.focus(function () { if (i.preventFocusZoom) { e.mobile.zoom.disable(true) } l.addClass(e.mobile.focusClass) }).blur(function () { l.removeClass(e.mobile.focusClass); if (i.preventFocusZoom) { e.mobile.zoom.enable(true) } }); if (s.is("textarea")) { var j = 15, q = 100, u; this._keyup = function () { var y = s[0].scrollHeight, o = s[0].clientHeight; if (o < y) { s.height(y + j) } }; s.on("keyup change input paste", function () { clearTimeout(u); u = setTimeout(v._keyup, q) }); this._on(e.mobile.document, { pagechange: "_keyup" }); if (e.trim(s.val())) { this._on(e.mobile.window, { load: "_keyup" }) } } if (s.attr("disabled")) { this.disable() } }, disable: function () { var i, g = this.element.is("[type='search'], :jqmData(type='search')"), h = this.element.is("input") && !this.element.is(":jqmData(type='range')"), j = this.element.attr("disabled", true) && (h || g); if (j) { i = this.element.parent() } else { i = this.element } i.addClass("ui-disabled"); return this._setOption("disabled", true) }, enable: function () { var i, g = this.element.is("[type='search'], :jqmData(type='search')"), h = this.element.is("input") && !this.element.is(":jqmData(type='range')"), j = this.element.attr("disabled", false) && (h || g); if (j) { i = this.element.parent() } else { i = this.element } i.removeClass("ui-disabled"); return this._setOption("disabled", false) } }); e.mobile.document.bind("pagecreate create", function (g) { e.mobile.textinput.prototype.enhanceWithin(g.target, true) }) })(c); (function (f, g) { f.mobile.listview.prototype.options.filter = false; f.mobile.listview.prototype.options.filterPlaceholder = "Filter items..."; f.mobile.listview.prototype.options.filterTheme = "c"; f.mobile.listview.prototype.options.filterReveal = false; var e = function (j, i, h) { return j.toString().toLowerCase().indexOf(i) === -1 }; f.mobile.listview.prototype.options.filterCallback = e; f.mobile.document.delegate("ul, ol", "listviewcreate", function () { var k = f(this), j = k.data("mobile-listview"); if (!j.options.filter) { return } if (j.options.filterReveal) { k.children().addClass("ui-screen-hidden") } var l = f("<form>", { "class": "ui-listview-filter ui-bar-" + j.options.filterTheme, role: "search" }).submit(function (m) { m.preventDefault(); i.blur() }), h = function (t) { var u = f(this), o = this.value.toLowerCase(), p = null, v = k.children(), n = u.jqmData("lastval") + "", r = false, s = "", w, m = j.options.filterCallback !== e; if (n && n === o) { return } j._trigger("beforefilter", "beforefilter", { input: this }); u.jqmData("lastval", o); if (m || o.length < n.length || o.indexOf(n) !== 0) { p = k.children() } else { p = k.children(":not(.ui-screen-hidden)"); if (!p.length && j.options.filterReveal) { p = k.children(".ui-screen-hidden") } } if (o) { for (var q = p.length - 1; q >= 0; q--) { w = f(p[q]); s = w.jqmData("filtertext") || w.text(); if (w.is("li:jqmData(role=list-divider)")) { w.toggleClass("ui-filter-hidequeue", !r); r = false } else { if (j.options.filterCallback(s, o, w)) { w.toggleClass("ui-filter-hidequeue", true) } else { r = true } } } p.filter(":not(.ui-filter-hidequeue)").toggleClass("ui-screen-hidden", false); p.filter(".ui-filter-hidequeue").toggleClass("ui-screen-hidden", true).toggleClass("ui-filter-hidequeue", false) } else { p.toggleClass("ui-screen-hidden", !!j.options.filterReveal) } j._addFirstLastClasses(v, j._getVisibles(v, false), false) }, i = f("<input>", { placeholder: j.options.filterPlaceholder }).attr("data-" + f.mobile.ns + "type", "search").jqmData("lastval", "").bind("keyup change input", h).appendTo(l).textinput(); if (j.options.inset) { l.addClass("ui-listview-filter-inset") } l.bind("submit", function () { return false }).insertBefore(k) }) })(c); (function (e, f) { e.widget("mobile.slider", e.mobile.widget, { widgetEventPrefix: "slide", options: { theme: null, trackTheme: null, disabled: false, initSelector: "input[type='range'], :jqmData(type='range'), :jqmData(role='slider')", mini: false, highlight: false }, _create: function () { var w = this, s = this.element, A = e.mobile.getInheritedTheme(s, "c"), K = this.options.theme || A, x = this.options.trackTheme || A, u = s[0].nodeName.toLowerCase(), k = this.isToggleSwitch = u === "select", t = s.parent().is(":jqmData(role='rangeslider')"), I = (this.isToggleSwitch) ? "ui-slider-switch" : "", n = s.attr("id"), N = e("[for='" + n + "']"), v = N.attr("id") || n + "-label", r = N.attr("id", v), z = !this.isToggleSwitch ? parseFloat(s.attr("min")) : 0, D = !this.isToggleSwitch ? parseFloat(s.attr("max")) : s.find("option").length - 1, q = b.parseFloat(s.attr("step") || 1), L = (this.options.mini || s.jqmData("mini")) ? " ui-mini" : "", H = a.createElement("a"), J = e(H), g = a.createElement("div"), y = e(g), G = this.options.highlight && !this.isToggleSwitch ? (function () { var i = a.createElement("div"); i.className = "ui-slider-bg " + e.mobile.activeBtnClass + " ui-btn-corner-all"; return e(i).prependTo(y) })() : false, m; H.setAttribute("href", "#"); g.setAttribute("role", "application"); g.className = [this.isToggleSwitch ? "ui-slider " : "ui-slider-track ", I, " ui-btn-down-", x, " ui-btn-corner-all", L].join(""); H.className = "ui-slider-handle"; g.appendChild(H); J.buttonMarkup({ corners: true, theme: K, shadow: true }).attr({ role: "slider", "aria-valuemin": z, "aria-valuemax": D, "aria-valuenow": this._value(), "aria-valuetext": this._value(), title: this._value(), "aria-labelledby": v }); e.extend(this, { slider: y, handle: J, type: u, step: q, max: D, min: z, valuebg: G, isRangeslider: t, dragging: false, beforeStart: null, userModified: false, mouseMoved: false }); if (this.isToggleSwitch) { var o = a.createElement("div"); o.className = "ui-slider-inneroffset"; for (var B = 0, l = g.childNodes.length; B < l; B++) { o.appendChild(g.childNodes[B]) } g.appendChild(o); J.addClass("ui-slider-handle-snapping"); m = s.find("option"); for (var C = 0, M = m.length; C < M; C++) { var h = !C ? "b" : "a", p = !C ? " ui-btn-down-" + x : (" " + e.mobile.activeBtnClass), F = a.createElement("div"), E = a.createElement("span"); E.className = ["ui-slider-label ui-slider-label-", h, p, " ui-btn-corner-all"].join(""); E.setAttribute("role", "img"); E.appendChild(a.createTextNode(m[C].innerHTML)); e(E).prependTo(y) } w._labels = e(".ui-slider-label", y) } r.addClass("ui-slider"); s.addClass(this.isToggleSwitch ? "ui-slider-switch" : "ui-slider-input"); this._on(s, { change: "_controlChange", keyup: "_controlKeyup", blur: "_controlBlur", vmouseup: "_controlVMouseUp" }); y.bind("vmousedown", e.proxy(this._sliderVMouseDown, this)).bind("vclick", false); this._on(a, { vmousemove: "_preventDocumentDrag" }); this._on(y.add(a), { vmouseup: "_sliderVMouseUp" }); y.insertAfter(s); if (!this.isToggleSwitch && !t) { var o = this.options.mini ? "<div class='ui-slider ui-mini'>" : "<div class='ui-slider'>"; s.add(y).wrapAll(o) } if (this.isToggleSwitch) { this.handle.bind({ focus: function () { y.addClass(e.mobile.focusClass) }, blur: function () { y.removeClass(e.mobile.focusClass) } }) } this._on(this.handle, { vmousedown: "_handleVMouseDown", keydown: "_handleKeydown", keyup: "_handleKeyup" }); this.handle.bind("vclick", false); if (this._handleFormReset) { this._handleFormReset() } this.refresh(f, f, true) }, _controlChange: function (g) { if (this._trigger("controlchange", g) === false) { return false } if (!this.mouseMoved) { this.refresh(this._value(), true) } }, _controlKeyup: function (g) { this.refresh(this._value(), true, true) }, _controlBlur: function (g) { this.refresh(this._value(), true) }, _controlVMouseUp: function (g) { this._checkedRefresh() }, _handleVMouseDown: function (g) { this.handle.focus() }, _handleKeydown: function (h) { var g = this._value(); if (this.options.disabled) { return } switch (h.keyCode) { case e.mobile.keyCode.HOME: case e.mobile.keyCode.END: case e.mobile.keyCode.PAGE_UP: case e.mobile.keyCode.PAGE_DOWN: case e.mobile.keyCode.UP: case e.mobile.keyCode.RIGHT: case e.mobile.keyCode.DOWN: case e.mobile.keyCode.LEFT: h.preventDefault(); if (!this._keySliding) { this._keySliding = true; this.handle.addClass("ui-state-active") } break } switch (h.keyCode) { case e.mobile.keyCode.HOME: this.refresh(this.min); break; case e.mobile.keyCode.END: this.refresh(this.max); break; case e.mobile.keyCode.PAGE_UP: case e.mobile.keyCode.UP: case e.mobile.keyCode.LEFT: this.refresh(g + this.step); break; case e.mobile.keyCode.PAGE_DOWN: case e.mobile.keyCode.DOWN: case e.mobile.keyCode.RIGHT: this.refresh(g - this.step); break } }, _handleKeyup: function (g) { if (this._keySliding) { this._keySliding = false; this.handle.removeClass("ui-state-active") } }, _sliderVMouseDown: function (g) { if (this.options.disabled) { return false } if (this._trigger("beforestart", g) === false) { return false } this.dragging = true; this.userModified = false; this.mouseMoved = false; if (this.isToggleSwitch) { this.beforeStart = this.element[0].selectedIndex } this.refresh(g); this._trigger("start"); return false }, _sliderVMouseUp: function () { if (this.dragging) { this.dragging = false; if (this.isToggleSwitch) { this.handle.addClass("ui-slider-handle-snapping"); if (this.mouseMoved) { if (this.userModified) { this.refresh(this.beforeStart === 0 ? 1 : 0) } else { this.refresh(this.beforeStart) } } else { this.refresh(this.beforeStart === 0 ? 1 : 0) } } this.mouseMoved = false; this._trigger("stop"); return false } }, _preventDocumentDrag: function (g) { if (this._trigger("drag", g) === false) { return false } if (this.dragging && !this.options.disabled) { this.mouseMoved = true; if (this.isToggleSwitch) { this.handle.removeClass("ui-slider-handle-snapping") } this.refresh(g); this.userModified = this.beforeStart !== this.element[0].selectedIndex; return false } }, _checkedRefresh: function () { if (this.value != this._value()) { this.refresh(this._value()) } }, _value: function () { return this.isToggleSwitch ? this.element[0].selectedIndex : parseFloat(this.element.val()) }, _reset: function () { this.refresh(f, false, true) }, refresh: function (G, E, p) { var t = this, A = e.mobile.getInheritedTheme(this.element, "c"), D = this.options.theme || A, u = this.options.trackTheme || A; t.slider[0].className = [this.isToggleSwitch ? "ui-slider ui-slider-switch" : "ui-slider-track", " ui-btn-down-" + u, " ui-btn-corner-all", (this.options.mini) ? " ui-mini" : ""].join(""); if (this.options.disabled || this.element.attr("disabled")) { this.disable() } this.value = this._value(); if (this.options.highlight && !this.isToggleSwitch && this.slider.find(".ui-slider-bg").length === 0) { this.valuebg = (function () { var H = a.createElement("div"); H.className = "ui-slider-bg " + e.mobile.activeBtnClass + " ui-btn-corner-all"; return e(H).prependTo(t.slider) })() } this.handle.buttonMarkup({ corners: true, theme: D, shadow: true }); var n, i, q = this.element, v = !this.isToggleSwitch, g = v ? [] : q.find("option"), z = v ? parseFloat(q.attr("min")) : 0, C = v ? parseFloat(q.attr("max")) : g.length - 1, m = (v && parseFloat(q.attr("step")) > 0) ? parseFloat(q.attr("step")) : 1; if (typeof G === "object") { var l, x, F = G, w = 8; l = this.slider.offset().left; x = this.slider.width(); n = x / ((C - z) / m); if (!this.dragging || F.pageX < l - w || F.pageX > l + x + w) { return } if (n > 1) { i = ((F.pageX - l) / x) * 100; i = 100 - i } else { i = Math.round(((F.pageX - l) / x) * 100); i = 100 - i } } else { if (G == null) { G = v ? parseFloat(q.val() || 0) : q[0].selectedIndex } i = (parseFloat(G) - z) / (C - z) * 100 } if (isNaN(i)) { return } var s = (i / 100) * (C - z) + z; var B = (s - z) % m; var o = s - B; if (Math.abs(B) * 2 >= m) { o += (B > 0) ? m : (-m) } var r = 100 / ((C - z) / m); s = parseFloat(o.toFixed(5)); if (typeof n === "undefined") { n = x / ((C - z) / m) } if (n > 1 && v) { i = (s - z) * r * (1 / m) } if (i < 0) { i = 0 } if (i > 100) { i = 100 } if (s < z) { s = z } if (s > C) { s = C } this.handle.css("right", i + "%"); this.handle[0].setAttribute("aria-valuenow", v ? s : g.eq(s).attr("value")); this.handle[0].setAttribute("aria-valuetext", v ? s : g.eq(s).getEncodedText()); this.handle[0].setAttribute("title", v ? s : g.eq(s).getEncodedText()); if (this.valuebg) { this.valuebg.css("width", i + "%") } if (this._labels) { var y = this.handle.width() / this.slider.width() * 100, h = i && y + (100 - y) * i / 100, j = i === 100 ? 0 : Math.min(y + 100 - h, 100); this._labels.each(function () { var H = e(this).is(".ui-slider-label-a"); e(this).width((H ? h : j) + "%") }) } if (!p) { var k = false; if (v) { k = q.val() !== s; q.val(s) } else { k = q[0].selectedIndex !== s; q[0].selectedIndex = s } if (this._trigger("beforechange", G) === false) { return false } if (!E && k) { q.trigger("change") } } }, enable: function () { this.element.attr("disabled", false); this.slider.removeClass("ui-disabled").attr("aria-disabled", false); return this._setOption("disabled", false) }, disable: function () { this.element.attr("disabled", true); this.slider.addClass("ui-disabled").attr("aria-disabled", true); return this._setOption("disabled", true) } }); e.widget("mobile.slider", e.mobile.slider, e.mobile.behaviors.formReset); e.mobile.document.bind("pagecreate create", function (g) { e.mobile.slider.prototype.enhanceWithin(g.target, true) }) })(c); (function (e, f) { e.widget("mobile.rangeslider", e.mobile.widget, { options: { theme: null, trackTheme: null, disabled: false, initSelector: ":jqmData(role='rangeslider')", mini: false, highlight: true }, _create: function () { var i, p = this.element, g = this.options.mini ? "ui-rangeslider ui-mini" : "ui-rangeslider", h = p.find("input").first(), j = p.find("input").last(), m = p.find("label").first(), n = e.data(h.get(0), "mobileSlider").slider, o = e.data(j.get(0), "mobileSlider").slider, l = e.data(h.get(0), "mobileSlider").handle, k = e('<div class="ui-rangeslider-sliders" />').appendTo(p); if (p.find("label").length > 1) { i = p.find("label").last().hide() } h.addClass("ui-rangeslider-first"); j.addClass("ui-rangeslider-last"); p.addClass(g); n.appendTo(k); o.appendTo(k); m.prependTo(p); l.prependTo(o); e.extend(this, { _inputFirst: h, _inputLast: j, _sliderFirst: n, _sliderLast: o, _targetVal: null, _sliderTarget: false, _sliders: k, _proxy: false }); this.refresh(); this._on(this.element.find("input.ui-slider-input"), { slidebeforestart: "_slidebeforestart", slidestop: "_slidestop", slidedrag: "_slidedrag", slidebeforechange: "_change", blur: "_change", keyup: "_change" }); this._on(l, { vmousedown: "_dragFirstHandle" }) }, _dragFirstHandle: function (g) { e.data(this._inputFirst.get(0), "mobileSlider").dragging = true; e.data(this._inputFirst.get(0), "mobileSlider").refresh(g); return false }, _slidedrag: function (h) { var i = e(h.target).is(this._inputFirst), g = (i) ? this._inputLast : this._inputFirst; this._sliderTarget = false; if ((this._proxy === "first" && i) || (this._proxy === "last" && !i)) { e.data(g.get(0), "mobileSlider").dragging = true; e.data(g.get(0), "mobileSlider").refresh(h); return false } }, _slidestop: function (g) { var h = e(g.target).is(this._inputFirst); this._proxy = false; this.element.find("input").trigger("vmouseup"); this._sliderFirst.css("z-index", h ? 1 : "") }, _slidebeforestart: function (g) { this._sliderTarget = false; if (e(g.originalEvent.target).hasClass("ui-slider-track")) { this._sliderTarget = true; this._targetVal = e(g.target).val() } }, _setOption: function (g) { this._superApply(g); this.refresh() }, refresh: function () { var g = this.element, h = this.options; g.find("input").slider({ theme: h.theme, trackTheme: h.trackTheme, disabled: h.disabled, mini: h.mini, highlight: h.highlight }).slider("refresh"); this._updateHighlight() }, _change: function (l) { if (l.type == "keyup") { this._updateHighlight(); return false } var j = parseFloat(this._inputFirst.val(), 10), h = parseFloat(this._inputLast.val(), 10), m = e(l.target).hasClass("ui-rangeslider-first"), k = m ? this._inputFirst : this._inputLast, g = m ? this._inputLast : this._inputFirst; if (j > h && !this._sliderTarget) { k.val(m ? h : j).slider("refresh"); this._trigger("normalize") } else { if (j > h) { k.val(this._targetVal).slider("refresh"); var i = this; setTimeout(function () { g.val(m ? j : h).slider("refresh"); e.data(g.get(0), "mobileSlider").handle.focus(); i._sliderFirst.css("z-index", m ? "" : 1); i._trigger("normalize") }, 0); this._proxy = (m) ? "first" : "last" } } if (j === h) { e.data(k.get(0), "mobileSlider").handle.css("z-index", 1); e.data(g.get(0), "mobileSlider").handle.css("z-index", 0) } else { e.data(g.get(0), "mobileSlider").handle.css("z-index", ""); e.data(k.get(0), "mobileSlider").handle.css("z-index", "") } this._updateHighlight(); if (j >= h) { return false } }, _updateHighlight: function () { var h = parseInt(e.data(this._inputFirst.get(0), "mobileSlider").handle.get(0).style.right, 10), g = parseInt(e.data(this._inputLast.get(0), "mobileSlider").handle.get(0).style.right, 10), i = (g - h); this.element.find(".ui-slider-bg").css({ "margin-right": h + "%", width: i + "%" }) }, _destroy: function () { this.element.removeClass("ui-rangeslider ui-mini").find("label").show(); this._inputFirst.after(this._sliderFirst); this._inputLast.after(this._sliderLast); this._sliders.remove(); this.element.find("input").removeClass("ui-rangeslider-first ui-rangeslider-last").slider("destroy") } }); e.widget("mobile.rangeslider", e.mobile.rangeslider, e.mobile.behaviors.formReset); e(a).bind("pagecreate create", function (g) { e.mobile.rangeslider.prototype.enhanceWithin(g.target, true) }) })(c); (function (e, f) { e.widget("mobile.selectmenu", e.mobile.widget, { options: { theme: null, disabled: false, icon: "arrow-d", iconpos: "left", inline: false, corners: true, shadow: true, iconshadow: true, overlayTheme: "a", dividerTheme: "b", hidePlaceholderMenuItems: true, closeText: "Close", nativeMenu: true, preventFocusZoom: /iPhone|iPad|iPod/.test(navigator.platform) && navigator.userAgent.indexOf("AppleWebKit") > -1, initSelector: "select:not( :jqmData(role='slider') )", mini: false }, _button: function () { return e("<div/>") }, _setDisabled: function (g) { this.element.attr("disabled", g); this.button.attr("aria-disabled", g); return this._setOption("disabled", g) }, _focusButton: function () { var g = this; setTimeout(function () { g.button.focus() }, 40) }, _selectOptions: function () { return this.select.find("option") }, _preExtension: function () { var g = ""; if (!!~this.element[0].className.indexOf("ui-btn-right")) { g = " ui-btn-right" } if (!!~this.element[0].className.indexOf("ui-btn-left")) { g = " ui-btn-left" } this.select = this.element.removeClass("ui-btn-right ui-btn-left").wrap("<div class='ui-select" + g + "'>"); this.selectID = this.select.attr("id"); this.label = e("label[for='" + this.selectID + "']").addClass("ui-select"); this.isMultiple = this.select[0].multiple; if (!this.options.theme) { this.options.theme = e.mobile.getInheritedTheme(this.select, "c") } }, _destroy: function () { var g = this.element.parents(".ui-select"); if (g.length > 0) { if (g.is(".ui-btn-right, .ui-btn-left")) { this.element.addClass(g.is(".ui-btn-right") ? "ui-btn-right" : "ui-btn-left") } this.element.insertAfter(g); g.remove() } }, _create: function () { this._preExtension(); this._trigger("beforeCreate"); this.button = this._button(); var h = this, i = this.options, m = i.inline || this.select.jqmData("inline"), k = i.mini || this.select.jqmData("mini"), l = i.icon ? (i.iconpos || this.select.jqmData("iconpos")) : false, g = this.select[0].selectedIndex === -1 ? 0 : this.select[0].selectedIndex, j = this.button.insertBefore(this.select).buttonMarkup({ theme: i.theme, icon: i.icon, iconpos: l, inline: m, corners: i.corners, shadow: i.shadow, iconshadow: i.iconshadow, mini: k }); this.setButtonText(); if (i.nativeMenu && b.opera && b.opera.version) { j.addClass("ui-select-nativeonly") } if (this.isMultiple) { this.buttonCount = e("<span>").addClass("ui-li-count ui-btn-up-c ui-btn-corner-all").hide().appendTo(j.addClass("ui-li-has-count")) } if (i.disabled || this.element.attr("disabled")) { this.disable() } this.select.change(function () { h.refresh() }); if (this._handleFormReset) { this._handleFormReset() } this.build() }, build: function () { var g = this; this.select.appendTo(g.button).bind("vmousedown", function () { g.button.addClass(e.mobile.activeBtnClass) }).bind("focus", function () { g.button.addClass(e.mobile.focusClass) }).bind("blur", function () { g.button.removeClass(e.mobile.focusClass) }).bind("focus vmouseover", function () { g.button.trigger("vmouseover") }).bind("vmousemove", function () { g.button.removeClass(e.mobile.activeBtnClass) }).bind("change blur vmouseout", function () { g.button.trigger("vmouseout").removeClass(e.mobile.activeBtnClass) }).bind("change blur", function () { g.button.removeClass("ui-btn-down-" + g.options.theme) }); g.button.bind("vmousedown", function () { if (g.options.preventFocusZoom) { e.mobile.zoom.disable(true) } }); g.label.bind("click focus", function () { if (g.options.preventFocusZoom) { e.mobile.zoom.disable(true) } }); g.select.bind("focus", function () { if (g.options.preventFocusZoom) { e.mobile.zoom.disable(true) } }); g.button.bind("mouseup", function () { if (g.options.preventFocusZoom) { setTimeout(function () { e.mobile.zoom.enable(true) }, 0) } }); g.select.bind("blur", function () { if (g.options.preventFocusZoom) { e.mobile.zoom.enable(true) } }) }, selected: function () { return this._selectOptions().filter(":selected") }, selectedIndices: function () { var g = this; return this.selected().map(function () { return g._selectOptions().index(this) }).get() }, setButtonText: function () { var g = this, i = this.selected(), j = this.placeholder, h = e(a.createElement("span")); this.button.find(".ui-btn-text").html(function () { if (i.length) { j = i.map(function () { return e(this).text() }).get().join(", ") } else { j = g.placeholder } return h.text(j).addClass(g.select.attr("class")).addClass(i.attr("class")) }) }, setButtonCount: function () { var g = this.selected(); if (this.isMultiple) { this.buttonCount[g.length > 1 ? "show" : "hide"]().text(g.length) } }, _reset: function () { this.refresh() }, refresh: function () { this.setButtonText(); this.setButtonCount() }, open: e.noop, close: e.noop, disable: function () { this._setDisabled(true); this.button.addClass("ui-disabled") }, enable: function () { this._setDisabled(false); this.button.removeClass("ui-disabled") } }); e.widget("mobile.selectmenu", e.mobile.selectmenu, e.mobile.behaviors.formReset); e.mobile.document.bind("pagecreate create", function (g) { e.mobile.selectmenu.prototype.enhanceWithin(g.target, true) }) })(c); (function (f, g) { var e = function (l) { var u = l.select, A = l._destroy, z = l.selectID, x = (z ? z : ((f.mobile.ns || "") + "uuid-" + l.uuid)), o = x + "-listbox", s = x + "-dialog", q = l.label, h = l.select.closest(".ui-page"), w = l._selectOptions(), m = l.isMultiple = l.select[0].multiple, p = z + "-button", r = z + "-menu", t = f("<div data-" + f.mobile.ns + "role='dialog' id='" + s + "' data-" + f.mobile.ns + "theme='" + l.options.theme + "' data-" + f.mobile.ns + "overlay-theme='" + l.options.overlayTheme + "'><div data-" + f.mobile.ns + "role='header'><div class='ui-title'>" + q.getEncodedText() + "</div></div><div data-" + f.mobile.ns + "role='content'></div></div>"), i = f("<div id='" + o + "' class='ui-selectmenu'>").insertAfter(l.select).popup({ theme: l.options.overlayTheme }), B = f("<ul>", { "class": "ui-selectmenu-list", id: r, role: "listbox", "aria-labelledby": p }).attr("data-" + f.mobile.ns + "theme", l.options.theme).attr("data-" + f.mobile.ns + "divider-theme", l.options.dividerTheme).appendTo(i), y = f("<div>", { "class": "ui-header ui-bar-" + l.options.theme }).prependTo(i), v = f("<h1>", { "class": "ui-title" }).appendTo(y), k, j, n; if (l.isMultiple) { n = f("<a>", { text: l.options.closeText, href: "#", "class": "ui-btn-right" }).attr("data-" + f.mobile.ns + "iconpos", "notext").attr("data-" + f.mobile.ns + "icon", "delete").appendTo(y).buttonMarkup() } f.extend(l, { select: l.select, selectID: z, buttonId: p, menuId: r, popupID: o, dialogID: s, thisPage: h, menuPage: t, label: q, selectOptions: w, isMultiple: m, theme: l.options.theme, listbox: i, list: B, header: y, headerTitle: v, headerClose: n, menuPageContent: k, menuPageClose: j, placeholder: "", build: function () { var C = this; C.refresh(); if (C._origTabIndex === g) { C._origTabIndex = (C.select[0].getAttribute("tabindex") === null) ? false : C.select.attr("tabindex") } C.select.attr("tabindex", "-1").focus(function () { f(this).blur(); C.button.focus() }); C.button.bind("vclick keydown", function (D) { if (C.options.disabled || C.isOpen) { return } if (D.type === "vclick" || D.keyCode && (D.keyCode === f.mobile.keyCode.ENTER || D.keyCode === f.mobile.keyCode.SPACE)) { C._decideFormat(); if (C.menuType === "overlay") { C.button.attr("href", "#" + C.popupID).attr("data-" + (f.mobile.ns || "") + "rel", "popup") } else { C.button.attr("href", "#" + C.dialogID).attr("data-" + (f.mobile.ns || "") + "rel", "dialog") } C.isOpen = true } }); C.list.attr("role", "listbox").bind("focusin", function (D) { f(D.target).attr("tabindex", "0").trigger("vmouseover") }).bind("focusout", function (D) { f(D.target).attr("tabindex", "-1").trigger("vmouseout") }).delegate("li:not(.ui-disabled, .ui-li-divider)", "click", function (F) { var G = C.select[0].selectedIndex, D = C.list.find("li:not(.ui-li-divider)").index(this), E = C._selectOptions().eq(D)[0]; E.selected = C.isMultiple ? !E.selected : true; if (C.isMultiple) { f(this).find(".ui-icon").toggleClass("ui-icon-checkbox-on", E.selected).toggleClass("ui-icon-checkbox-off", !E.selected) } if (C.isMultiple || G !== D) { C.select.trigger("change") } if (C.isMultiple) { C.list.find("li:not(.ui-li-divider)").eq(D).addClass("ui-btn-down-" + l.options.theme).find("a").first().focus() } else { C.close() } F.preventDefault() }).keydown(function (G) { var H = f(G.target), D = H.closest("li"), F, E; switch (G.keyCode) { case 38: F = D.prev().not(".ui-selectmenu-placeholder"); if (F.is(".ui-li-divider")) { F = F.prev() } if (F.length) { H.blur().attr("tabindex", "-1"); F.addClass("ui-btn-down-" + l.options.theme).find("a").first().focus() } return false; case 40: E = D.next(); if (E.is(".ui-li-divider")) { E = E.next() } if (E.length) { H.blur().attr("tabindex", "-1"); E.addClass("ui-btn-down-" + l.options.theme).find("a").first().focus() } return false; case 13: case 32: H.trigger("click"); return false } }); C.menuPage.bind("pagehide", function () { f.mobile._bindPageRemove.call(C.thisPage) }); C.listbox.bind("popupafterclose", function (D) { C.close() }); if (C.isMultiple) { C.headerClose.click(function () { if (C.menuType === "overlay") { C.close(); return false } }) } C.thisPage.addDependents(this.menuPage) }, _isRebuildRequired: function () { var D = this.list.find("li"), C = this._selectOptions(); return C.text() !== D.text() }, selected: function () { return this._selectOptions().filter(":selected:not( :jqmData(placeholder='true') )") }, refresh: function (E, H) { var D = this, C = this.element, F = this.isMultiple, G; if (E || this._isRebuildRequired()) { D._buildList() } G = this.selectedIndices(); D.setButtonText(); D.setButtonCount(); D.list.find("li:not(.ui-li-divider)").removeClass(f.mobile.activeBtnClass).attr("aria-selected", false).each(function (I) { if (f.inArray(I, G) > -1) { var J = f(this); J.attr("aria-selected", true); if (D.isMultiple) { J.find(".ui-icon").removeClass("ui-icon-checkbox-off").addClass("ui-icon-checkbox-on") } else { if (J.is(".ui-selectmenu-placeholder")) { J.next().addClass(f.mobile.activeBtnClass) } else { J.addClass(f.mobile.activeBtnClass) } } } }) }, close: function () { if (this.options.disabled || !this.isOpen) { return } var C = this; if (C.menuType === "page") { C.menuPage.dialog("close"); C.list.appendTo(C.listbox) } else { C.listbox.popup("close") } C._focusButton(); C.isOpen = false }, open: function () { this.button.click() }, _decideFormat: function () { var M = this, F = f.mobile.window, J = M.list.parent(), H = J.outerHeight(), K = J.outerWidth(), E = f("." + f.mobile.activePageClass), G = F.scrollTop(), L = M.button.offset().top, D = F.height(), C = F.width(); function I() { var N = M.list.find("." + f.mobile.activeBtnClass + " a"); if (N.length === 0) { N = M.list.find("li.ui-btn:not( :jqmData(placeholder='true') ) a") } N.first().focus().closest("li").addClass("ui-btn-down-" + l.options.theme) } if (H > D - 80 || !f.support.scrollTop) { M.menuPage.appendTo(f.mobile.pageContainer).page(); M.menuPageContent = t.find(".ui-content"); M.menuPageClose = t.find(".ui-header a"); M.thisPage.unbind("pagehide.remove"); if (G === 0 && L > D) { M.thisPage.one("pagehide", function () { f(this).jqmData("lastScroll", L) }) } M.menuPage.one("pageshow", function () { I() }).one("pagehide", function () { M.close() }); M.menuType = "page"; M.menuPageContent.append(M.list); M.menuPage.find("div .ui-title").text(M.label.text()) } else { M.menuType = "overlay"; M.listbox.one("popupafteropen", I) } }, _buildList: function () { var N = this, S = this.options, F = this.placeholder, E = true, W = [], C = [], I = N.isMultiple ? "checkbox-off" : "false"; N.list.empty().filter(".ui-listview").listview("destroy"); var U = N.select.find("option"), K = U.length, R = this.select[0], ac = "data-" + f.mobile.ns, Y = ac + "option-index", ad = ac + "icon", G = ac + "role", T = ac + "placeholder", D = a.createDocumentFragment(), X = false, P; for (var Z = 0; Z < K; Z++, X = false) { var M = U[Z], V = f(M), J = M.parentNode, L = V.text(), H = a.createElement("a"), ab = []; H.setAttribute("href", "#"); H.appendChild(a.createTextNode(L)); if (J !== R && J.nodeName.toLowerCase() === "optgroup") { var O = J.getAttribute("label"); if (O !== P) { var Q = a.createElement("li"); Q.setAttribute(G, "list-divider"); Q.setAttribute("role", "option"); Q.setAttribute("tabindex", "-1"); Q.appendChild(a.createTextNode(O)); D.appendChild(Q); P = O } } if (E && (!M.getAttribute("value") || L.length === 0 || V.jqmData("placeholder"))) { E = false; X = true; if (null === M.getAttribute(T)) { this._removePlaceholderAttr = true } M.setAttribute(T, true); if (S.hidePlaceholderMenuItems) { ab.push("ui-selectmenu-placeholder") } if (F !== L) { F = N.placeholder = L } } var aa = a.createElement("li"); if (M.disabled) { ab.push("ui-disabled"); aa.setAttribute("aria-disabled", true) } aa.setAttribute(Y, Z); aa.setAttribute(ad, I); if (X) { aa.setAttribute(T, true) } aa.className = ab.join(" "); aa.setAttribute("role", "option"); H.setAttribute("tabindex", "-1"); aa.appendChild(H); D.appendChild(aa) } N.list[0].appendChild(D); if (!this.isMultiple && !F.length) { this.header.hide() } else { this.headerTitle.text(this.placeholder) } N.list.listview() }, _button: function () { return f("<a>", { href: "#", role: "button", id: this.buttonId, "aria-haspopup": "true", "aria-owns": this.menuId }) }, _destroy: function () { this.close(); if (this._origTabIndex !== g) { if (this._origTabIndex !== false) { this.select.attr("tabindex", this._origTabIndex) } else { this.select.removeAttr("tabindex") } } if (this._removePlaceholderAttr) { this._selectOptions().removeAttr("data-" + f.mobile.ns + "placeholder") } this.listbox.remove(); A.apply(this, arguments) } }) }; f.mobile.document.bind("selectmenubeforecreate", function (i) { var h = f(i.target).data("mobile-selectmenu"); if (!h.options.nativeMenu && h.element.parents(":jqmData(role='popup')").length === 0) { e(h) } }) })(c); (function (e, f) { e.widget("mobile.fixedtoolbar", e.mobile.widget, { options: { visibleOnPageShow: true, disablePageZoom: true, transition: "slide", fullscreen: false, tapToggle: true, tapToggleBlacklist: "a, button, input, select, textarea, .ui-header-fixed, .ui-footer-fixed, .ui-popup, .ui-panel, .ui-panel-dismiss-open", hideDuringFocus: "input, textarea, select", updatePagePadding: true, trackPersistentToolbars: true, supportBlacklist: function () { return !e.support.fixedPosition }, initSelector: ":jqmData(position='fixed')" }, _create: function () { var g = this, k = g.options, i = g.element, j = i.is(":jqmData(role='header')") ? "header" : "footer", h = i.closest(".ui-page"); if (k.supportBlacklist()) { g.destroy(); return } i.addClass("ui-" + j + "-fixed"); if (k.fullscreen) { i.addClass("ui-" + j + "-fullscreen"); h.addClass("ui-page-" + j + "-fullscreen") } else { h.addClass("ui-page-" + j + "-fixed") } e.extend(this, { _thisPage: null }); g._addTransitionClass(); g._bindPageEvents(); g._bindToggleHandlers() }, _addTransitionClass: function () { var g = this.options.transition; if (g && g !== "none") { if (g === "slide") { g = this.element.is(".ui-header") ? "slidedown" : "slideup" } this.element.addClass(g) } }, _bindPageEvents: function () { this._thisPage = this.element.closest(".ui-page"); this._on(this._thisPage, { pagebeforeshow: "_handlePageBeforeShow", webkitAnimationStart: "_handleAnimationStart", animationstart: "_handleAnimationStart", updatelayout: "_handleAnimationStart", pageshow: "_handlePageShow", pagebeforehide: "_handlePageBeforeHide" }) }, _handlePageBeforeShow: function () { var g = this.options; if (g.disablePageZoom) { e.mobile.zoom.disable(true) } if (!g.visibleOnPageShow) { this.hide(true) } }, _handleAnimationStart: function () { if (this.options.updatePagePadding) { this.updatePagePadding(this._thisPage) } }, _handlePageShow: function () { this.updatePagePadding(this._thisPage); if (this.options.updatePagePadding) { this._on(e.mobile.window, { throttledresize: "updatePagePadding" }) } }, _handlePageBeforeHide: function (j, i) { var m = this.options; if (m.disablePageZoom) { e.mobile.zoom.enable(true) } if (m.updatePagePadding) { this._off(e.mobile.window, "throttledresize") } if (m.trackPersistentToolbars) { var l = e(".ui-footer-fixed:jqmData(id)", this._thisPage), k = e(".ui-header-fixed:jqmData(id)", this._thisPage), h = l.length && i.nextPage && e(".ui-footer-fixed:jqmData(id='" + l.jqmData("id") + "')", i.nextPage) || e(), g = k.length && i.nextPage && e(".ui-header-fixed:jqmData(id='" + k.jqmData("id") + "')", i.nextPage) || e(); if (h.length || g.length) { h.add(g).appendTo(e.mobile.pageContainer); i.nextPage.one("pageshow", function () { g.prependTo(this); h.appendTo(this) }) } } }, _visible: true, updatePagePadding: function (h) { var g = this.element, j = g.is(".ui-header"), i = parseFloat(g.css(j ? "top" : "bottom")); if (this.options.fullscreen) { return } h = h || this._thisPage || g.closest(".ui-page"); e(h).css("padding-" + (j ? "top" : "bottom"), g.outerHeight() + i) }, _useTransition: function (k) { var n = e.mobile.window, j = this.element, g = n.scrollTop(), h = j.height(), m = j.closest(".ui-page").height(), i = e.mobile.getScreenHeight(), l = j.is(":jqmData(role='header')") ? "header" : "footer"; return !k && (this.options.transition && this.options.transition !== "none" && ((l === "header" && !this.options.fullscreen && g > h) || (l === "footer" && !this.options.fullscreen && g + i < m - h)) || this.options.fullscreen) }, show: function (h) { var i = "ui-fixed-hidden", g = this.element; if (this._useTransition(h)) { g.removeClass("out " + i).addClass("in").animationComplete(function () { g.removeClass("in") }) } else { g.removeClass(i) } this._visible = true }, hide: function (h) { var j = "ui-fixed-hidden", g = this.element, i = "out" + (this.options.transition === "slide" ? " reverse" : ""); if (this._useTransition(h)) { g.addClass(i).removeClass("in").animationComplete(function () { g.addClass(j).removeClass(i) }) } else { g.addClass(j).removeClass(i) } this._visible = false }, toggle: function () { this[this._visible ? "hide" : "show"]() }, _bindToggleHandlers: function () { var g = this, h, j = g.options, i = g.element; i.closest(".ui-page").bind("vclick", function (k) { if (j.tapToggle && !e(k.target).closest(j.tapToggleBlacklist).length) { g.toggle() } }).bind("focusin focusout", function (k) { if (screen.width < 1025 && e(k.target).is(j.hideDuringFocus) && !e(k.target).closest(".ui-header-fixed, .ui-footer-fixed").length) { if (k.type === "focusout" && !g._visible) { h = setTimeout(function () { g.show() }, 0) } else { if (k.type === "focusin" && g._visible) { clearTimeout(h); g.hide() } } } }) }, _destroy: function () { var g = this.element, h = g.is(".ui-header"); g.closest(".ui-page").css("padding-" + (h ? "top" : "bottom"), ""); g.removeClass("ui-header-fixed ui-footer-fixed ui-header-fullscreen ui-footer-fullscreen in out fade slidedown slideup ui-fixed-hidden"); g.closest(".ui-page").removeClass("ui-page-header-fixed ui-page-footer-fixed ui-page-header-fullscreen ui-page-footer-fullscreen") } }); e.mobile.document.bind("pagecreate create", function (g) { if (e(g.target).jqmData("fullscreen")) { e(e.mobile.fixedtoolbar.prototype.options.initSelector, g.target).not(":jqmData(fullscreen)").jqmData("fullscreen", true) } e.mobile.fixedtoolbar.prototype.enhanceWithin(g.target) }) })(c); (function (e, f) { e.widget("mobile.fixedtoolbar", e.mobile.fixedtoolbar, { _create: function () { this._super(); this._workarounds() }, _workarounds: function () { var j = navigator.userAgent, g = navigator.platform, i = j.match(/AppleWebKit\/([0-9]+)/), l = !!i && i[1], k = null, h = this; if (g.indexOf("iPhone") > -1 || g.indexOf("iPad") > -1 || g.indexOf("iPod") > -1) { k = "ios" } else { if (j.indexOf("Android") > -1) { k = "android" } else { return } } if (k === "ios") { h._bindScrollWorkaround() } else { if (k === "android" && l && l < 534) { h._bindScrollWorkaround(); h._bindListThumbWorkaround() } else { return } } }, _viewportOffset: function () { var g = this.element, i = g.is(".ui-header"), h = Math.abs(g.offset().top - e.mobile.window.scrollTop()); if (!i) { h = Math.round(h - e.mobile.window.height() + g.outerHeight()) - 60 } return h }, _bindScrollWorkaround: function () { var g = this; this._on(e.mobile.window, { scrollstop: function () { var h = g._viewportOffset(); if (h > 2 && g._visible) { g._triggerRedraw() } } }) }, _bindListThumbWorkaround: function () { this.element.closest(".ui-page").addClass("ui-android-2x-fixed") }, _triggerRedraw: function () { var g = parseFloat(e(".ui-page-active").css("padding-bottom")); e(".ui-page-active").css("padding-bottom", (g + 1) + "px"); setTimeout(function () { e(".ui-page-active").css("padding-bottom", g + "px") }, 0) }, destroy: function () { this._super(); this.element.closest(".ui-page-active").removeClass("ui-android-2x-fix") } }) })(c); (function (h, i) { h.mobile.iosorientationfixEnabled = true; var f = navigator.userAgent; if (!(/iPhone|iPad|iPod/.test(navigator.platform) && /OS [1-5]_[0-9_]* like Mac OS X/i.test(f) && f.indexOf("AppleWebKit") > -1)) { h.mobile.iosorientationfixEnabled = false; return } var n = h.mobile.zoom, m, l, k, j, e; function g(o) { m = o.originalEvent; e = m.accelerationIncludingGravity; l = Math.abs(e.x); k = Math.abs(e.y); j = Math.abs(e.z); if (!i.orientation && (l > 7 || ((j > 6 && k < 8 || j < 8 && k > 6) && l > 5))) { if (n.enabled) { n.disable() } } else { if (!n.enabled) { n.enable() } } } h.mobile.document.on("mobileinit", function () { if (h.mobile.iosorientationfixEnabled) { h.mobile.window.bind("orientationchange.iosorientationfix", n.enable).bind("devicemotion.iosorientationfix", g) } }) }(c, this)); (function (h, g, k) { var f = h("html"), e = h("head"), j = h.mobile.window; function i() { f.removeClass("ui-mobile-rendering") } h(g.document).trigger("mobileinit"); if (!h.mobile.gradeA()) { return } if (h.mobile.ajaxBlacklist) { h.mobile.ajaxEnabled = false } f.addClass("ui-mobile ui-mobile-rendering"); setTimeout(i, 5000); h.extend(h.mobile, { initializePage: function () { var o = h.mobile.path, n = h(":jqmData(role='page'), :jqmData(role='dialog')"), m = o.stripHash(o.stripQueryParams(o.parseLocation().hash)), l = a.getElementById(m); if (!n.length) { n = h("body").wrapInner("<div data-" + h.mobile.ns + "role='page'></div>").children(0) } n.each(function () { var p = h(this); if (!p.jqmData("url")) { p.attr("data-" + h.mobile.ns + "url", p.attr("id") || location.pathname + location.search) } }); h.mobile.firstPage = n.first(); h.mobile.pageContainer = h.mobile.firstPage.parent().addClass("ui-mobile-viewport"); j.trigger("pagecontainercreate"); h.mobile.showPageLoadingMsg(); i(); if (!(h.mobile.hashListeningEnabled && h.mobile.path.isHashValid(location.hash) && (h(l).is(':jqmData(role="page")') || h.mobile.path.isPath(m) || m === h.mobile.dialogHashKey))) { if (h.mobile.path.isHashValid(location.hash)) { h.mobile.urlHistory.initialDst = m.replace("#", "") } if (h.event.special.navigate.isPushStateEnabled()) { h.mobile.navigate.navigator.squash(o.parseLocation().href) } h.mobile.changePage(h.mobile.firstPage, { transition: "none", reverse: true, changeHash: false, fromHashChange: true }) } else { if (!h.event.special.navigate.isPushStateEnabled()) { j.trigger("hashchange", [true]) } else { h.mobile.navigate.history.stack = []; h.mobile.navigate(h.mobile.path.isPath(location.hash) ? location.hash : location.href) } } } }); h.mobile.navreadyDeferred.resolve(); h(function () { g.scrollTo(0, 1); h.mobile.defaultHomeScroll = (!h.support.scrollTop || h.mobile.window.scrollTop() === 1) ? 0 : 1; if (h.mobile.autoInitializePage) { h.mobile.initializePage() } j.load(h.mobile.silentScroll); if (!h.support.cssPointerEvents) { h.mobile.document.delegate(".ui-disabled", "vclick", function (l) { l.preventDefault(); l.stopImmediatePropagation() }) } }) }(c, this))
}));